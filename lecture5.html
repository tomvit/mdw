<!DOCTYPE html>
<!--
    Middleware and Web Services, CTU course slides
    (cc) 2010-2023 Tomas Vitvar, http://vitvar.com
    written for Humla, an open source HTML5 presentation environment
-->
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="course" content="Middleware Architectures 1" />
  <meta name="lecture" content="Lecture 6" />
  <meta name="keywords" content="SOA, service concepts, service technologies, SOAP, REST, WSDL" />

  <link type="text/css" rel="stylesheet" href="css/meta.css">
  </link>
  <link type="text/css" rel="stylesheet" href="css/ctu-fit.css">
  </link>
  <link type="text/css" rel="stylesheet" href="humla/lib/core/humla.css">
  </link>

  <script type="text/javascript" src="humla/lib/humla.js"></script>
  <title>Representational State Transfer</title>
</head>

<body>
  <footer>
    <p><b>#META_LECTURE#: #TITLE#</b>,&nbsp;<span class="meta_semester" />,&nbsp;
      <span class="meta_twitter" />
    </p>
    <p><b>&#8210; #SLIDE_NO# &#8210;</b></p>
  </footer>

  <div class="slide intro">
    <hgroup>
      <h1><span class="meta_course" /></h1>
      <h2>#META_LECTURE#: #TITLE#</h2>
    </hgroup>
    <div class="author">
      <p class="meta_author" />
      <p><span class="meta_email" /> &bull; <span class="meta_twitter" /> &bull;
        <span class="meta_web" />
      </p>
    </div>
    <center>
      <div class="meta_logo"></div>
    </center>
    <div class="org">
      <p class="meta_org" />
      <p><span class="meta_orgfac" /> &bull; <span class="meta_field" />
        &bull; <span class="meta_orgweb" /></p>
    </div>
    <div class="etc">
      <div class="text-info">
        Modified: #LAST_MODIFIED#<br />
        Humla v#HUMLA_VERSION#
      </div>
      <a href="http://creativecommons.org/licenses/by-sa/3.0/">
        <div class="license"></div>
      </a>
      <div class="oppa"></div>
    </div>
  </div>

  <div class="slide outline"></div>

  <section>
    <header>Introduction to REST</header>

    <div class="slide">
      <hgroup>
        <h1>Data on the Web</h1>
      </hgroup>
      <div class="h-drawing" style="height: 450px" id="161LY9K1fWd-G3iNpulEEEXq1yoxvjsQxombdyV4Yyfc"></div>
    </div>

    <div class="slide">
      <hgroup>
        <h1>REST</h1>
      </hgroup>
      <ul class="small spacing">
        <li>REST</li>
        <ul>
          <li>Representational State Transfer</li>
        </ul>
        <li>Architecture Style</li>
        <ul>
          <li>Roy Fielding &ndash; co-author of HTTP</li>
          <li>He coined REST in his <span class="h-ref" id="rest">PhD thesis</span>.</li>
          <ul>
            <li>The thesis abstracts from HTTP technical details</li>
            <li>HTTP is one of the REST implementation &rarr; <b>RESTful</b></li>
            <li>REST is a leading programming model for Web APIs</li>
          </ul>
        </ul>
        <li>REST (RESTful) proper design</li>
        <ul>
          <li>people break principles often</li>
          <li>See <span class="h-ref" id="rest-anti">REST Anti-Patterns</span> for some details.<br />
        </ul>
        <li>REST and Web Service Architecture</li>
        <ul>
          <li>REST is a realization of WSA resource-oriented model</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>REST and Web Architecture</h1>
      </hgroup>
      <ul class="small">
        <li>Tim-Berners Lee</li>
        <ul>
          <li>"creator", father of the Web</li>
        </ul>
        <li>Key Principles</li>
        <ul>
          <li>Separation of Concerns</li>
          <ul>
            <li>enables independent innovation</li>
          </ul>
          <li>Standards-based</li>
          <ul>
            <li>common agreement, big spread and adoption</li>
          </ul>
          <li>Royalty-free technology</li>
          <ul>
            <li>a lot of open source, no fees</li>
          </ul>
        </ul>
        <li>Architectural Basis</li>
        <ul>
          <li><b>Identification:</b> universal linking of resources using URI</li>
          <li><b>Interaction:</b> protocols to retrieve resources &ndash; HTTP</li>
          <li><b>Formats:</b> resource representation (data and metadata)</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>HTTP Advantages</h1>
      </hgroup>
      <ul class="small spacing">
        <li>Familiarity</li>
        <ul>
          <li>HTTP protocol is well-known and widely used</li>
        </ul>
        <li>Interoperability</li>
        <ul>
          <li>All environments have HTTP client libraries</li>
          <ul>
            <li>technical interoperability is thus no problem</li>
            <li>no need to deal with vendor-specific interoperability issues</li>
          </ul>
          <li>You can focus on the core of the integration problem</li>
          <ul>
            <li>application (domain, content) interoperability</li>
          </ul>
        </ul>
        <li>Scalability</li>
        <ul>
          <li>you can use highly scalable Web infrastructure</li>
          <ul>
            <li>caching servers, proxy servers, etc.</li>
          </ul>
          <li>HTTP features such as HTTP GET idempotence and safe
            allow you to use caching</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>REST Core Principles</h1>
      </hgroup>
      <ul class="small">
        <li>REST architectural style defines constraints</li>
        <ul>
          <li>if you follow them, they help you to achieve a good design,
            interoperability and scalability.</li>
        </ul>
        <li>Constraints</li>
        <ul>
          <li>Client/Server</li>
          <li>Statelessness</li>
          <li>Cacheability</li>
          <li>Layered system</li>
          <li>Uniform interface</li>
        </ul>
        <li>Guiding principles</li>
        <ul>
          <li>Identification of resources</li>
          <li>Representations of resources and self-descriptive messages</li>
          <li>Hypermedia as the engine of application state (HATEOAS)</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Resource</h1>
      </hgroup>
      <ul class="x-small">
        <li>A resource can be anything such as</li>
        <ul>
          <li>A real object: car, dog, Web page, printed document</li>
          <li>An abstract thing such as address, name, etc. &rarr; RDF</li>
        </ul>
        <li>A resource in REST</li>
        <ul>
          <li>A resource corresponds to one or more entities of a data model</li>
          <li>A representation of a resource can be conveyed in a message electronically (information resource)</li>
          <li>A resource has an identifier and a representation and a client can apply an access to it</li>
        </ul>
      </ul>
      <div class="h-drawing" style="height: 200px" id="1sSCJVFnKU0UgLek_FlFdQfKVeT9myKf-34IYyw5FQps"></div>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Access to a Resource</h1>
      </hgroup>
      <div class="h-drawing" style="height: 290px;" id="1hw7HbAaK09w3I1mtmsJZMb3_OsYpFlBrrJjJRGsz23g"></div>
      <ul class="x-small">
        <li>Terminology</li>
        <ul>
          <li>Client = User Agent</li>
          <li><b>Dereferencing URI</b> &ndash; a process of obtaining a protocol from the URI and creating a request.
          </li>
          <li><b>Access</b> &ndash; a process of sending a request and obtaining a response as a result;
            access usually realized through HTTP.</li>
        </ul>
      </ul>
    </div>

  </section>

  <div class="slide outline"></div>

  <section>
    <header>Uniform Resource Identifier</header>

    <div class="slide">
      <hgroup>
        <h1>URI, URL, URN</h1>
      </hgroup>
      <ul class="small spacing">
        <li>URI &ndash; Uniform Resource Identifier</li>
        <ul>
          <li>URI only identifies a resource</li>
          <ul>
            <li>it does not imply the resource physically exists</li>
          </ul>
          <li>URI could be URL (locator) or URN (name)</li>
        </ul>
        <li>URL &ndash; Uniform Resource Locator</li>
        <ul>
          <li>in addition allows to locate the resource</li>
          <ul>
            <li>that is &mdash; its network location</li>
          </ul>
          <li>every URL is URI but an URI does not need to be URL</li>
        </ul>
        <li>URN &ndash; Uniform Resource Name</li>
        <ul>
          <li>refers to URI under "urn" scheme (<span class="h-ref" id="rfc-2141">RFC 2141</span>)</li>
          <li>require to be globally unique and persistent</li>
          <ul>
            <li>even if the resource cease to exist/becomes unavailable</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>URI</h1>
      </hgroup>
      <ul class="x-small">
        <li>Definition</li>
        <pre class="brush: plain; gutter: 'false'; class-name: 'tight'">
                            URI = scheme ":" [ "//" authority ] [ "/" path ] [ "?" query ] [ "#" frag ]
    				    </pre>
        <li>Hierarchal sequence of components</li>
        <ul>
          <li><code>scheme</code></li>
          <ul>
            <li>refers to a spec that assigns IDs within that scheme</li>
            <li>examples: <code>http</code>, <code>ftp</code>, <code>mailto</code>, <code>urn</code></li>
            <li><code>scheme != protocol</code></li>
          </ul>
          <li><code>authority</code></li>
          <ul>
            <li>registered name (domain name) or server address</li>
            <li>optional port and user</li>
          </ul>
          <li><code>path and query</code></li>
          <ul>
            <li>identify resource within the scheme and authority scope</li>
            <li>path &ndash; hierarchal form</li>
            <li>query &ndash; non-hierarchal form (parameters key=value)</li>
          </ul>
          <li><code>fragment</code></li>
          <ul>
            <li>reference to a secondary resource within the primary resource</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Resources over Entities</h1>
      </hgroup>
      <ul class="x-small">
        <li>Application's data model</li>
        <ul>
          <li>Entities and properties that the app uses for its data</li>
        </ul>
        <div class="h-drawing" style="height: 290px" id="1zT46lCNzfiaw9d5HfA6fzDZFAj2GQG8sRAg1QRWPPfQ"></div>
        <li>URI identifies a resource within the app's data model</li>
        <ul>
          <li><code>path</code> &ndash; a "view" on the data model</li>
          <ul>
            <li>data model is a graph</li>
            <li>URI identifies a resource using a path in a tree with some root</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Examples of Views</h1>
      </hgroup>
      <ul class="x-small">
        <li>View 1</li>
        <ul>
          <li>all customers: <code>/customers</code></li>
          <li>a particular customer: <code>/customers/{customer-id}</code>
          <li>All orders of a customer: <code>/customers/{customer-id}/orders</code>
          <li>A particular order: <code>/customers/{customer-id}/orders/{order-id}</code>
        </ul>
        <li>View 2</li>
        <ul>
          <li>all orders: <code>/orders</code></li>
          <li>All orders of a customer: <code>/orders/{customer-id}</code>
          <li>A particular order: <code>/orders/{customer-id}/{order-id}</code>
        </ul>
        <li class="no-bullet">&rArr; Design issues</li>
        <li>Good design practices</li>
        <ul>
          <li>No need for 1:1 relationship between resources and data entities</li>
          <ul>
            <li>A resource may aggregate data from two or more entities</li>
            <li>Thus only expose resources if it makes sense for the service</li>
          </ul>
          <li>Try to limit URI aliases, make it simple and clear</li>
        </ul>
      </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Path vs. Query</h1>
      </hgroup>
      <ul class="x-small">
        <li>Path</li>
        <ul>
          <li>Hierarchical component, a view on the data</li>
          <li>The main identification of the resource</li>
        </ul>
        <li>Query</li>
        <ul>
          <li>Can define selection, projection or other processing instructions</li>
          <li>Selection</li>
          <ul>
            <li>filters entries of a resource by values of properties<br />
              <code>/customers/?status=valid</code>
            </li>
          </ul>
          <li>Projection</li>
          <ul>
            <li>filters properties of resource entries<br />
              <code>/customers/?properties=id,name</code>
            </li>
          </ul>
          <li>Processing instructions examples</li>
          <ul>
            <li>data format of the resource &rarr; cf. URI opacity<br />
              <code>/customers/?format=JSON</code>
            </li>
            <li>Access keys such as API keys<br />
              <code>/customers/?key=3ae56-56ef76-34540aeb</code>
            </li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Fragment Semantics</h1>
      </hgroup>
      <ul class="small">
        <li>Fragment semantics for HTML</li>
        <ul>
          <li>assume that <code>orders.html</code> are in <code>HTML</code> format.</li>
        </ul>
        <pre class="brush: plain">
                                http://company.com/tomas/orders.html#3456
                            </pre>
        <ul>
          <li class="no-bullet">&rArr; there is a HTML element with <code>id=3456</code></li>
        </ul>
        <li>But:</li>
        <ul>
          <li>Consider <code>orders</code> resource in <code>application/xml</code></li>
        </ul>
        <pre class="brush: xml">
                                &lt;orders>
                                    &lt;order id="3456">...&lt;/order>
                                    ...
                                &lt;/orders>
                            </pre>
        <ul>
          <li>Can't say that <code>http://company.com/tomas/orders.xml#3456</code> identifies
            an order element within the <code>orders</code> resource.</li>
          <li><code>application/xml</code> content type does not define fragment semantics</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Major characteristics</li>
      </hgroup>
      <ul class="xx-small">
        <li>Capability URL</li>
        <ul>
          <li>Short lived URL generated for a specific purpose</li>
          <li>For example, an user e-mail verification</li>
        </ul>
        <li>URI Alias</li>
        <ul>
          <li>Two different URIs identifying the same resource</li>
        </ul>
        <li>URI Collision</li>
        <ul>
          <li>One URI identifying two different resources (misuse of an URI authority)</li>
        </ul>
        <li>URI Opacity</li>
        <ul>
          <li>Content type encoded as part of an URI</li>
          <li><code>http://www.example.org/customers.xml</code>
        </ul>
        <li>Resource versions encoded in an URI</li>
        <ul>
          <li>Two URIs identifying the same resource of different versions</li>
          <li><code>http://www.example.org/v1/customers.xml</code>
        </ul>
        <li>Persistent URL</li>
        <ul>
          <li>URL is valid even when the resource is obsolete</li>
          <li>For example, a redirection should be in place</li>
        </ul>
      </ul>
    </div>

  </section>

  <div class="slide outline"></div>

  <section>
    <header>Resource Representation</header>

    <div class="slide">
      <hgroup>
        <h1>Representation and Data Format</h1>
      </hgroup>
      <ul class="small">
        <li>Representation</li>
        <ul>
          <li>Various languages, one resource can have multiple representations</li>
          <ul>
            <li>XML, HTML, JSON, YAML, RDF, ...</li>
            <li>should conform to Internet Media Types</li>
          </ul>
        </ul>
        <li>Data format</li>
        <ul>
          <li>Format of resource data</li>
          <li>Binary format</li>
          <ul>
            <li>specific data structures</li>
            <li>pointers, numeric values, compressed, etc.</li>
          </ul>
          <li>Textual format</li>
          <ul>
            <li>in a defined encoding as a sequence of characters</li>
            <li>HTML, XML-based formats are textual</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Metadata</h1>
      </hgroup>
      <ul class="x-small">
        <li>Metadata ~ self-description</li>
        <ul>
          <li>Data about the resource</li>
          <li>e.g., data format, representation, date the resource was created, ...</li>
          <li class="space-before no-bullet">1. Defined by HTTP response headers</li>
          <li class="no-bullet">2. Can be part of the data format</li>
          <ul>
            <li>Atom Syndication Format such as <code>author</code>, <code>updated</code>, ...</li>
            <li>HTML <code>http-equiv</code> meta tags</li>
          </ul>
        </ul>
        <li>Resource anatomy</li>
        <img src="img/resource-anatomy.png" style="padding-left: 130px" width="460px" />
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Content-Type Metadata</h1>
      </hgroup>
      <ul class="x-small">
        <li>Access</li>
        <ul>
          <li>to be retrieved (GET)</li>
          <li>to be inserted or updated (PUT, POST)</li>
          <li>to be deleted (DELETE)</li>
        </ul>
        <li>Request</li>
        <ul>
          <li>HTTP header <code>Accept</code>, part of content negotiation protocol</li>
        </ul>
        <li>Response</li>
        <ul>
          <li>HTTP header <code>Content-Type: type/subtype; parameters</code></li>
          <li>Specifies an <span id="rfc-2045" class="h-ref">Internet
              Media Type</span> of the resource representation.</li>
          <ul>
            <li>IANA (Internet Assigned Numbers Authority)
              manages a <span id="iana-media-types" class="h-ref">registry of media types</span> and character encodings
            </li>
            <li>subtypes of <code>text</code> type have an optional charset parameter<br />
              <code>text/html; charset=iso-8859-1</code>
            </li>
          </ul>
          <li>A resource may provide more than one representations</li>
          <ul>
            <li>promotes services' loose coupling</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Major Media Types</h1>
      </hgroup>
      <ul class="small">
        <li>Common Standard Media Types</li>
        <ul>
          <li><code>text/plain</code></li>
          <ul>
            <li>natural text in no formal structures</li>
          </ul>
          <li><code>text/html</code></li>
          <ul>
            <li>natural text embedded in HTML format</li>
          </ul>
          <li><code>application/xml</code>, <code>application/json</code></li>
          <ul>
            <li>XML-based/JSON-based, application specific format</li>
          </ul>
          <li><code>application/wsdl+xml</code></li>
          <ul>
            <li><code>+xml</code> suffix to indicate a specific format</li>
          </ul>
        </ul>
        <li>Non-standard media types</li>
        <ul>
          <li>Types or subtypes that begin with <code>x-</code> are not in IANA<br />
            <code>application/x-latex</code>
          </li>
          <li>subtypes that begin with <code>vnd.</code> are vendor-specific<br />
            <code>application/vnd.ms-excel</code>
          </li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Resource State</h1>
      </hgroup>
      <ul class="x-small">
        <li>State</li>
        <ul>
          <li>Resource representation is in fact a <b>representation of a resource state</b></li>
          <li>Resource may be in different states over time</li>
        </ul>
      </ul>
      <div class="h-drawing" style="height: 250px; margin: 15px 0px 15px 0px;"
        id="1dhjNo4p6x5rS-IH3E2WcVw3TxwCqmdhtA-9wD0hwbuc"></div>
      <ul class="small space-before">
        <li>In REST resource states represent application states</li>
      </ul>
    </div>

    <div class="slide" id="resource-state">
      <hgroup>
        <h1>Resource State Example</h1>
      </hgroup>
      <ul class="x-small">
        <li>Time <code>t1</code>: client A retrieves a resource <code>/orders</code> (GET)</li>
        <pre class="brush: xml; class-name: 'tight'">
                            &lt;orders>
                                &lt;order id="54467"/>
                                &lt;order id="65432"/>
                            &lt;/orders>                                                
                        </pre>
        <li>Time <code>t2</code>: client B adds a new order (POST)</li>
        <pre class="brush: xml; class-name: 'tight'">
                            &lt;order>
                                ...
                            &lt;/order>                                                
                        </pre>
        <li>Time <code>t3</code>: client A retrieves a resource <code>/orders</code> (GET)</li>
        <pre class="brush: xml; class-name: 'tight'">
                            &lt;orders>
                                &lt;order id="54467"/>
                                &lt;order id="65432"/>
                                &lt;order id="74567"/>
                            &lt;/orders>                                                
                        </pre>
        <li>The resource <code>/orders</code> has different states in <code>t1</code>
          and <code>t3</code>.
      </ul>
    </div>
  </section>

  <div class="slide outline"></div>

  <section>
    <header>Uniform Interface</header>

    <div class="slide">
      <hgroup>
        <h1>Uniform Interface</h1>
      </hgroup>
      <ul class="small">
        <li>Uniform interface = finite set of operations</li>
        <ul>
          <li>Resource manipulation</li>
          <ul>
            <li>CRUD &ndash; Create (POST/PUT), Read (GET), Update (PUT/PATCH), Delete (DELETE)</li>
          </ul>
          <li>operations are not domain-specific</li>
          <ul>
            <li>For example, <code>GET /orders</code> and not <code>getOrders()</code></li>
            <li>This reduces complexity when solving interoperability</li>
          </ul>
        </ul>
        <li>Integration issues examples</li>
      </ul>
      <img src="img/integration-issues.png" style="padding-left: 50px" width="700px" />
    </div>

    <div class="slide">
      <hgroup>
        <h1>Safe and Unsafe Operations</h1>
      </hgroup>
      <ul class="small">
        <li>Safe operations</li>
        <ul>
          <li>Do not change the resource state</li>
          <li>Usually "read-only" or "lookup" operation</li>
          <li>Clients can cache the results and refresh the cache freely</li>
        </ul>
        <li>Unsafe operations</li>
        <ul>
          <li>May change the state of the resource</li>
          <li>Transactions such as buy a ticket, post a message</li>
          <li>Unsafe does not mean dangerous!</li>
        </ul>
        <li>Unsafe interactions and transaction results</li>
        <ul>
          <li><code>POST</code> response may include transaction results</li>
          <ul>
            <li>you buy a ticket and submit a purchase data</li>
            <li>you get transaction results</li>
            <li>and you cannot bookmark this..., why?</li>
          </ul>
          <li>Should be referable with a persistent URI</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Idempotence</h1>
      </hgroup>
      <ul>
        <li>Idempotent operation</li>
        <ul>
          <li>Invoking a method on the same resource always has the same effect</li>
          <li>Operations <code>GET</code>, <code>PUT</code>, <code>DELETE</code></li>
        </ul>
        <li>Non-idempotent operation</li>
        <ul>
          <li>Invoking a method on the same resource may have different effects</li>
          <li>Operation <code>POST</code></li>
        </ul>
        <li>Effect = a state change</li>
        <ul>
          <li>recall the effect definition in MDW</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>GET</h1>
      </hgroup>
      <ul class="small">
        <li>Reading</li>
        <ul>
          <li><code>GET</code> retrieves a representation of a state of a resource</li>
          <pre class="brush: plain; gutter: 'false'">
                              &gt; GET /orders HTTP/1.1
                              &gt; Accept: application/xml

                              &lt; HTTP/1.1 200 OK
                              &lt; Content-Type: application/xml
                              &lt;
                              &lt; ...resource representation in xml...
                          </pre>
          <li>It is read-only operation</li>
          <li>It is <b>safe</b></li>
          <li>It is <b>idempotent</b></li>
          <li class="space-before"><code>GET</code> retrieves different states over time but
            the effect is always the same, cf.
            <a href="lecture5.html#/resource-state">resource state</a> hence it is idempotent.
          </li>
          <li>Invocation of <code>GET</code> involves content negotiation</li>
        </ul>
      </ul>
    </div>

    <div class="slide" id="PUT">
      <hgroup>
        <h1>PUT</h1>
      </hgroup>
      <ul class="small">
        <li>Updating or Inserting</li>
        <ul>
          <li><code>PUT</code> updates or inserts a representation of a state of a resource</li>
          <li>Updating the resource is a <b>complete replacement of the resource</b></li>
          <pre class="brush: xml; gutter: 'false'">
                              &gt; PUT /orders/4456 HTTP/1.1
                              &gt; Content-Type: application/xml
                              &gt;
                              &gt; &lt;order>...&lt;/order>

                              &lt; HTTP/1.1 CODE
                          </pre>
          <li>where CODE is:</li>
          <ul>
            <li><code>200 OK</code> or <code>204 No Content</code> for updating:
              A resource with id <code>4456</code> <b>exists</b>, the client
              sends an updated resource</li>
            <li><code>201 Created</code> for inserting: A resource <b>does not exist</b>, the client
              generates the id <code>4456</code> and sends a representation of it.</li>
          </ul>
          <li>It is <b>not safe</b> and it is <b>idempotent</b></li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>PATCH</h1>
      </hgroup>
      <ul class="x-small">
        <li><code>PATCH</code> to partial update a resource</li>
        <ul>
          <li>IETF specification, see <span id="rfc-5789" class="h-ref"></span></li>
        </ul>
        <li>Use in GData Protocol</li>
        <ul>
          <li>To add, modify or delete selected elements of an Atom feed entry</li>
          <li>Example to delete a description element and add a new title element
            <br /><code>gd:fields</code> uses the partial response syntax
          </li>
          <pre class="brush: xml; class-name: 'tight'">
                              PATCH /myFeed/1/1/
                              Content-Type: application/xml

                              &lt;entry xmlns='http://www.w3.org/2005/Atom'
                                  xmlns:gd='http://schemas.google.com/g/2005'
                                  gd:fields='description'>
                                &lt;title>New title&lt;/title>
                              &lt;/entry></pre>
          <li>Rules</li>
          <ul>
            <li>Fields not already present are added</li>
            <li>Non-repeating fields already present are updated</li>
            <li>Repeating fields already present are appended</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>POST</h1>
      </hgroup>
      <ul class="small">
        <li>Inserting</li>
        <ul>
          <li><code>POST</code> inserts a new resource</li>
          <li>A server generates a new resource ID, client only supplies a content and a resource URI where the new
            resource will be inserted.</li>
          <pre class="brush: xml; gutter: 'false'">
                              &gt; POST /orders HTTP/1.1
                              &gt; Content-Type: application/xml
                              &gt;
                              &gt; &lt;order>...&lt;/order>

                              &lt; HTTP/1.1 201 Created
                              &lt; Location: /orders/4456
                          </pre>
          <li>It is <b>not safe</b> an it is <b>not idempotent</b><br />
          <li class="space-before">A client may "suggest" a resource's id using the <code>Slug</code> header</li>
          <ul>
            <li>Defined in <span class="h-ref" id="rfc-5023">AtomPub protocol</span></li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>DELETE</h1>
      </hgroup>
      <ul class="small">
        <li>Deleting</li>
        <ul>
          <li><code>DELETE</code> deletes a resource with specified URI</li>
          <pre class="brush: plain; gutter: 'false'">
                          &gt; DELETE /orders/4456 HTTP/1.1

                          &lt; HTTP/1.1 CODE
                          </pre>
          <li>where CODE is:</li>
          <ul>
            <li><code>200 OK</code>: the response body contains an entity describing a result of the operation.</li>
            <li><code>204 No Content</code>: there is no response body.</li>
          </ul>
          <li class="space-before">It is <b>not safe</b> and it is <b>idempotent</b></li>
          <ul>
            <li>Multiple invocation of <code>DELETE /orders/4456</code> has always the same effect &ndash; the resource
              <code>/orders/4456</code> does not exist.
            </li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Other</h1>
      </hgroup>
      <ul class="small">
        <li>HEAD</li>
        <ul>
          <li>same as <code>GET</code> but only retrieves HTTP headers</li>
          <li>It is <b>safe</b> and <b>idempotent</b></li>
        </ul>
        <li>OPTIONS</li>
        <ul>
          <li>queries the resource for resource configuration</li>
          <li>It is <b>safe</b> and <b>idempotent</b></li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Types of Errors</h1>
      </hgroup>
      <ul class="x-small">
        <li>Client-side &ndash; status code <code>4xx</code></li>
        <ul>
          <li><code>400 Bad Request</code></li>
          <ul>
            <li>generic client-side error</li>
            <li>invalid format, such as syntax or validation error</li>
          </ul>
          <li><code>404 Not Found</code></li>
          <ul>
            <li>server can't map URI to a resource</li>
          </ul>
          <li><code>401 Unauthorized</code></li>
          <ul>
            <li>wrong credentials (such as user/pass, or API key)</li>
            <li>the response contains <code>WWW-Authenticate</code> indicating what kind of authentication
              the service accepts</li>
          </ul>
          <li><code>405 Method Not Allowed</code></li>
          <ul>
            <li>the resource does not support the HTTP method the client used</li>
            <li>the response contains <code>Allow</code> header to indicate methods it supports</li>
          </ul>
          <li><code>406 Not Acceptable</code></li>
          <ul>
            <li>so many restrictions on acceptable content types (using <code>Accept-*</code>)</li>
            <li>server cannot serialize the resource to requested content types</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Types of Errors (Cont.)</h1>
      </hgroup>
      <ul class="x-small">
        <li>Server-side &ndash; status code <code>5xx</code></li>
        <ul>
          <li><code>500 Internal Server Error</code></li>
          <ul>
            <li>generic server-side error</li>
            <li>usually not expressive, logs a message for system admins</li>
          </ul>
          <li><code>503 Service Not Available</code></li>
          <ul>
            <li>server is overloaded or is under maintenance</li>
            <li>the response contains <code>Retry-After</code> header</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Use of Status Codes</h1>
      </hgroup>
      <ul class="small">
        <li>Service should respect semantics of status codes!</li>
        <ul>
          <pre class="brush: js; gutter: 'false''">
                              &gt; GET /orders HTTP/1.1
                              &gt; Accept: application/json

                              &lt; HTTP/1.1 200 OK
                              &lt; Content-Type: application/json
                              &lt;
                              &lt; { "error" :
                              &lt;    { "error_text" :
                              &lt;        "you do not have rights to access this resource " }
                              &lt; }
                          </pre>
          <li>Client must understand the semantics of the response.</li>
          <li>This breaks loose coupling and reusability service principles</li>
          <li>The response should be:</li>
          <pre class="brush: plain; gutter: 'false'">
                              &lt; HTTP/1.1 401 Unauthorized
                              &lt; ...

                              &lt; ...optional text describing the error...
                          </pre>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Respect HTTP Semantics</h1>
      </hgroup>
      <ul class="small">
        <li>Do not overload semantics of HTTP methods</li>
        <ul>
          <li>For example, <code>GET</code> is read-only method and idempotent</li>
          <li>REST Anti-pattern:</li>
          <li class="no-bullet">&nbsp;&nbsp;&nbsp;<code>GET /orders/?add=new_order</code></li>
          <ul>
            <li>This is not REST!</li>
            <li>This breaks both safe and idempotent principles</li>
          </ul>
        </ul>
        <li>Consequences</li>
        <ul>
          <li>Result of <code>GET</code> can be cached by proxy servers</li>
          <li>They can revalidate their caches freely</li>
          <li>You can end up with new entries in your storage without you knowing!</li>
        </ul>
        <li>The same is true for other methods</li>
      </ul>
    </div>

  </section>


</body>

</html>