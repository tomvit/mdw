<!DOCTYPE html>
<!--
    Middleware and Web Services, CTU course slides
    (cc) 2010-2021 Tomas Vitvar, http://vitvar.com
    written for Humla, an open source HTML5 presentation environment
-->
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="course" content="Service Architectures" />
  <meta name="lecture" content="Lecture 2" />
  <meta name="keywords" content="SOA, service concepts, service technologies, integration patterns" />

  <link type="text/css" rel="stylesheet" href="css/meta.css">
  </link>
  <link type="text/css" rel="stylesheet" href="css/ctu-fit.css">
  </link>
  <link type="text/css" rel="stylesheet" href="humla/lib/core/humla.css">
  </link>

  <script type="text/javascript" src="humla/lib/humla.js"></script>
  <title>Service Architectures</title>
</head>

<body>
  <footer>
    <p><b>#META_LECTURE#: #TITLE#</b>,&nbsp;<span class="meta_semester" />,&nbsp;
      <span class="meta_twitter" /></p>
    <p><b>&#8210; #SLIDE_NO# &#8210;</b></p>
  </footer>

  <div class="slide intro">
    <hgroup>
      <h1><span class="meta_course" /></h1>
      <h2>#META_LECTURE#: #TITLE#</h2>
    </hgroup>
    <div class="author">
      <p class="meta_author" />
      <p><span class="meta_email" /> &bull; <span class="meta_twitter" /> &bull;
        <span class="meta_web" /></p>
    </div>
    <center>
      <div class="meta_logo"></div>
    </center>
    <div class="org">
      <p class="meta_org" />
      <p><span class="meta_orgfac" /> &bull; <span class="meta_field" />
        &bull; <span class="meta_orgweb" /></p>
    </div>
    <div class="etc">
      <div class="text-info">
        Modified: #LAST_MODIFIED#<br />
        Humla v#HUMLA_VERSION#
      </div>
      <a href="http://creativecommons.org/licenses/by-sa/3.0/">
        <div class="license"></div>
      </a>
      <div class="oppa"></div>
    </div>
  </div>

  <div class="slide outline"></div>

  <section>
    <header>Service Definition</header>

    <div class="slide" id="service-definition">
      <hgroup>
        <h1>Service Views</h1>
      </hgroup>
      <ul class="xx-small">
        <li>Business view</li>
        <ul>
          <li>A service realizes an effect that brings a business value
            to a service consumer</li>
          <ul>
            <li>for example, to pay for and deliver a book</li>
          </ul>
        </ul>
        <li>Conceptual view</li>
        <ul>
          <li>encapsulation, reusability, loose coupling, contracting,
            abstraction,</br> discoverability, composability</li>
        </ul>
        <li>Logical view</li>
        <ul>
          <li>service interface, description and implementation</li>
          <li>message-oriented and resource-oriented</li>
        </ul>
        <li>Software architecture view</li>
        <ul>
          <li>business service (also application service)</li>
          <ul>
            <li>external, exposed functionality of an application</li>
          </ul>
          <li>middleware service</li>
          <ul>
            <li>internal/technical, supports processing of requests</li>
          </ul>
        </ul>
        <li>Technology architecture view</li>
        <ul>
          <li>REST/RESTful, GraphQL</li>
          <li>XML-RPC/SOAP, RMI, gRPC</li>
          <li>WebSocket, WebRTC, SSE</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Interface, Description and Implementation</h1>
      </hgroup>
      <div class="h-drawing" style="height: 240px" id="1i1A6rM7K34IVVLrJK_ETV7-shOTl9fuzPYjOfpUMrwY"></div>
      <ul class="x-small">
        <li>Terminology clarification</li>
        <ul>
          <li>service ~ service interface + service implementation</li>
          <li>WSDL service ~ service description in WSDL language</li>
          <li>SOAP service ~ a service interface is possible to access through SOAP protocol;
            there is a WSDL description usually available too.</li>
          <li>REST/RESTful service ~ service interface that conforms to REST architectural style and HTTP protocol</li>
          <li>Microservice ~ a set of services that realize an app's capability
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Service Interface</h1>
      </hgroup>
      <ul class="x-small">
        <li>Service interface components</li>
        <ul>
          <li>Data</li>
          <ul>
            <li>Data model definition used by the service</li>
            <li>for example, input and output messages, representation of resources</li>
          </ul>
          <li>Functions</li>
          <ul>
            <li>operations and input and output data used by operations</li>
          </ul>
          <li>Process</li>
          <ul>
            <li>public process: how to consume the service's functionality</li>
          </ul>
          <li>Technical</li>
          <ul>
            <li>security, usage aspects (SLA-Service Level Agreement)</li>
            <li>other technical details such as IP addresses, ports, protocols, etc.</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide" id="effects">
      <hgroup>
        <h1>Public Process</h1>
      </hgroup>
      <ul class="x-small">
        <li>A state diagram</li>
        <ul>
          <li>operation of a service defines a <b>state transition</b> between two states.</li>
        </ul>
      </ul>
      <div class="h-drawing" style="height: 415px" id="1I1OVuy4H_wJ9Bxt0ZlC-Zy7pznXeub9QYHgEcqdAqz4"></div>
    </div>


    <div class="slide" id="service-characteristics">
      <hgroup>
        <h1>Service Characteristics</h1>
      </hgroup>
      <div class="h-drawing" id="1z7ZDZ2Eh-B_4H3DszyzTmaAdvTdUCy6Ig2PCRynUgmg" style="height: 420px; margin-top: 40px"></div>
    </div>

  </section>

  <div class="slide outline"></div>

  <section>
    <header>Integrating Applications</header>

    <div class="slide">
      <hgroup>
        <h1>Integration and Interoperability</h1>
      </hgroup>
      <ul class="small spacing">
        <li>Integration</li>
        <ul>
          <li>A process of connecting applications so that they can
            exchange and share capabilities, that is &mdash; information and functionalities.</li>
          <li>Includes methodological approaches as well as technologies</li>
        </ul>
        <li>Interoperability</li>
        <ul>
          <li>Ability of two or more applications to understand each other</li>
          <li>Interoperability levels</li>
          <ul>
            <li>Data &ndash; syntax/structure and semantics</li>
            <li>Functions/Processes &ndash; syntax and semantics</li>
            <li>Technical aspects &ndash; protocols, network addresses, etc.</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Service Oriented Architecture</h1>
      </hgroup>
      <center>
        <div class="h-drawing" id="1IOWIHKsD9qfPJ-eaXZc-hcL_4_gFO9AY5-ftDuZ1n3s" style="margin-top: 20px; width: 600px"></div>
      </center>
      <ul class="x-small">
        <li>SOA supports two core business strategies</li>
        <ul>
          <li>Growing top-line revenue</li>
          <ul>
            <li>Enterprise reacts quickly to requirements from the market</li>
            <li>Business processes can be reconfigured rather than reimplemented</li>
          </ul>
          <li>Improving bottom-line profit</li>
          <ul>
            <li>Saving development costs by resuing existing services</li>
          </ul>
        </ul>
        <li>Pre-integrated solutions</li>
        <ul>
          <li>Out-of-the-box applications and integration solutions among them</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>One-to-One Service Integration</h1>
      </hgroup>
      <ul class="x-small">
        <li>Direct integration of applications</li>
        <ul>
          <li>Multiple protocols problem, multiple vendor problem</li>
          <li>Replication of integration functionalities such as interoperability solutions</li>
        </ul>
        <div class="h-drawing" style="height: 340px" id="123tDQFo3Zq0LEzzhquKp1xJX4YZ6YiWC0GDNGGK1UA0" alt="One to One Spaghetti Integration"></div>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Many-to-Many Service Integration</h1>
      </hgroup>
      <ul class="x-small">
        <li>Enterprise Service Bus &ndash; central integration technology</li>
        <ul>
          <li>Realizes so called Service Oriented Architecture (SOA)</li>
          <li>Contains various integration components such as process server, mediators, messaging middleware,
            identity management, etc.</li>
        </ul>
      </ul>
      <div class="h-drawing" style="height: 360px" id="1-uHnuWoYea9KZgEBRkGmdpbKDT5THls9dn56XolZ1Lg" alt="SOA Integration"></div>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Integration Approaches Overview</h1>
      </hgroup>
      <div id="1i5jXogsSgaBZzCMpgtnXdTYaJ_rjbj_AeXEvkH9ljBI" class="h-drawing" style="height: 480px"></div>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Data-oriented Integration</h1>
      </hgroup>
      <div class="h-drawing" style="height: 140px" id="103hhb19k8lNgnHJ4ul5kpR7cUb7L1tmVFnoXtq15M5A"></div>
      <ul class="x-small">
        <li>Third-party database access</li>
        <ul>
          <li>Application D accesses a database of application B directly
            by using SQL and a knowledge of database B structure and constraints</li>
          <li>In the past: monolithic and two-tier client/server architectures</li>
          <li>Today: ETL (Extract, Transform, Load) technologies</li>
        </ul>
        <li>Problems</li>
        <ul>
          <li>App D must understand complex structures and constraints</li>
          <ul>
            <li>Data &ndash; very complex, includes structure and integrity constraints</li>
            <li>Functions/processes &ndash; hidden in integrity constraints</li>
            <li>Technical &ndash; access mechanisms can vary</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Service-oriented Integration</h1>
      </hgroup>
      <div class="h-drawing" style="height: 120px" id="1gqZkpqGJixejTLWZrZCE45iZo-2j3_rDgaRs3Qq4rN4"></div>
      <ul class="x-small">
        <li>Integration at the application layer</li>
        <ul>
          <li>Application exposes services that other applications consume</li>
          <li>Services hide implementation details but only define interfaces for integration</li>
        </ul>
        <li>Problems</li>
        <ul>
          <li>Can become unmanageable if not properly designed</li>
          <li>Interoperability</li>
          <ul>
            <li>Data &ndash; limited to input and output messages only</li>
            <li>Functions/processes &ndash; limited to semantics of services</li>
            <li>Technical &ndash; access mechanisms can vary</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Integration and Types of Data</h1>
      </hgroup>
      <ul class="x-small">
        <li>Real-time data &ndash; Web services</li>
        <ul>
          <li>Service-oriented integration</li>
          <li>online, realtime communication between a client and a service</li>
          <li>Usually small data and small amount of service invocation in a process</li>
        </ul>
        <li>Bulk data &ndash; ETL</li>
        <ul>
          <li>Data-oriented integration</li>
          <li>processing of large amount of data in batches</li>
          <li>Sometimes required for reconciliation across apps</li>
          <ul>
            <li>when real-time integration fails and there is poor error handling</li>
          </ul>
        </ul>
        <li><b>SOA provides both Web service and ETL capabilities</b></li>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Enterprise Service Bus</h1>
      </hgroup>
      <ul class="x-small">
        <li>ESB is a central intermediary in SOA</li>
        <ul>
          <li>Types of services: shared and infrastructure</li>
          <li>Types of processes: Technical and Business</li>
        </ul>
        <li>ESB Application</li>
        <ul>
          <li>Application running on an application server</li>
          <li>Exposes functionality via Web service interface</li>
          <li>Allows to communicate with various messaging protocols</li>
        </ul>
        <li>Middlware Integration Patterns</li>
        <ul>
          <li>Technical-level interoperability &ndash; message broker</li>
          <li>Location transparency</li>
          <li>Dynamic routing</li>
          <li>Session pooling</li>
          <li>Message enrichment</li>
          <li>Data transformation</li>
          <li>Key mapping</li>
        </ul>
      </ul>
    </div>

    <!-- <div class="slide">
      <hgroup>
        <h1>Service Types</h1>
      </hgroup>
      <ul class="x-small">
        <li>ESB services</li>
        <ul>
          <li>shared services &ndash; created for particular domain</li>
          <li>infrastructure services &ndash; support integration and interoperability</li>
        </ul>
      </ul>
      <div class="h-drawing" id="1HicnsnDos6MtMtIB75XP4odOnSpWs_qSj4TZJnBtWhI" style="height: 390px"></div>
    </div> -->

  </section>

  <div class="slide outline"></div>

  <section>
    <header>Integration Patterns</header>

    <section>
      <header>Synchronous and Asynchronous Integration</header>

      <div class="slide" id="sync-async-comm">
        <hgroup>
          <h1>Synchronous and Asynchronous Integration</h1>
        </hgroup>
        <div class="h-drawing" style="height: 220px" id="14daki2YQxkRxkpg_RW16-Efihlxzhep8AWXb226NaQA"></div>
        <ul class="x-small">
          <li>Synchronous</li>
          <ul>
            <li>one socket, |t<sub>req</sub> &#150; t<sub>res</sub>| is small</li>
            <li>easy to implement and deploy, only standard firewall config</li>
            <li>only the server defines endpoint</li>
          </ul>
          <li>Asynchronous</li>
          <ul>
            <li>request, response each has socket, client and server define endpoints</li>
            <li>|t<sub>req</sub> &#150; t<sub>res</sub>| can be large (hours, even days)</li>
            <li>harder to do across network elements (private/public networks issue)</li>
          </ul>
        </ul>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Asynchronous via Intermediary</h1>
        </hgroup>
        <div class="h-drawing" style="height: 220px" id="1mh4fk7kNmLyqVT1Cks4rRFRpGjFcU1yStOYQw2uiew8"></div>
        <ul class="x-small">
          <li>Intermediary</li>
          <ul>
            <li>A component that decouples a client-server communication</li>
            <li>It increases reliability and performance</li>
            <ul>
              <li>The server may not be available when a client sends a request</li>
              <li>There can be multiple servers that can handle the request</li>
            </ul>
          </ul>
          <li>Further Concepts</li>
          <ul>
            <li>Message Queues (MQ) &ndash; queue-based communication</li>
            <li>Publish/Subscribe (P/S) &ndash; event-driven communication</li>
          </ul>
        </ul>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Asynchronous via Polling</h1>
        </hgroup>
        <div class="h-drawing" style="height: 220px" id="1F3GsWbkka-hDU75qAzFl1OlhtMMHt_gfxE9m3CcvlAk"></div>
        <ul class="x-small">
          <li>Polling &ndash; only clients open sockets</li>
          <ul>
            <li>A client performs multiple request-response interactions</li>
            <ul>
              <li>The first interaction initiates a process on the server</li>
              <li>Subsequent interactions check for the processing status</li>
              <li>The last interaction retrieves the processing result</li>
            </ul>
          </ul>
          <li>Properties of environments</li>
          <ul>
            <li>A server cannot open a socket with the client (network restrictions)</li>
            <li>Typically on the Web (a client runs in a browser)</li>
          </ul>
        </ul>
      </div>
    </section>

    <div class="slide outline"></div>

    <section>
      <header>Middleware Integration Patterns</header>

      <div class="slide">
        <hgroup>
          <h1>Message Broker</h1>
        </hgroup>
        <ul class="small">
          <li>Message broker</li>
          <ul>
            <li>ESB can mix and match transports both standard and proprietary</li>
          </ul>
        </ul>
        <div class="h-drawing" id="1Ga9iANbaAAB-eEuCxZBPbTKX8pDQlvttS5-dI19vJRI" style="height: 350px"></div>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Location Transparency</h1>
        </hgroup>
        <ul class="small">
          <li>Location transparency</li>
          <ul>
            <li>ESB can hide changes in location of services</li>
            <li>Such changes will not affect clients</li>
            <li>Can also be used for load balancing for multiple service instances</li>
          </ul>
        </ul>
        <div class="h-drawing" id="1yyj2VBgauYs_zVWoSR1R2Hugf8pLG-HmDq8-2bF-vNI" style="height: 200px"></div>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Session Pooling</h1>
        </hgroup>
        <ul class="small">
          <li>Session Pooling</li>
          <ul>
            <li>ESB can maintain a pool of connections (session tokens) to a back-end app when creating a new connection is expensive</li>
            <li>A single session token can be reused by multiple instances of business processes</li>
          </ul>
        </ul>
        <div class="h-drawing" id="1O06u_GmbgK_hAPqwWJcQsFz7XtugVx6q1t5gCurn-3Y" style="height: 250px"></div>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Dynamic Routing</h1>
        </hgroup>
        <ul class="small">
          <li>Dynamic routing</li>
          <ul>
            <li>ESB exposes a service that routes to various back-end services based on message contents.</li>
          </ul>
        </ul>
        <div class="h-drawing" id="1dqQSDoXzk9KOscw7hA1N1aAexj5iqWbjn49e782DUMk" style="height: 180px"></div>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Message Enrichment</h1>
        </hgroup>
        <ul class="small">
          <li>Message enrichmenet</li>
          <ul>
            <li>Enriches a message before invoking back-end application service.</li>
          </ul>
        </ul>
        <div id="1675sNfJX75EcwMZXTSACUGKEhPf3QnTjXRPtEABXwm0" class="h-drawing" style="height: 250px"></div>

      </div>

      <div class="slide">
        <hgroup>
          <h1>Data Transformation</h1>
        </hgroup>
        <ul class="small">
          <li>Data transformation phases:</li>
          <ul>
            <li>Definition of mapping and execution of mappings</li>
          </ul>
          <li>Definition of mappings (design-time)</li>
          <ul>
            <li>A mapping associates one data structure to another data structure
              and defines a conversion between them.</li>
            <li>Mapping languages</li>
            <ul>
              <li>graphical for design that translates to XSLT, XQuery</li>
              <li>Sometimes implemented in 3rd gen. languages (e.g., Java)</li>
            </ul>
          </ul>
          <li>Execution of mappings (runtime)</li>
          <ul>
            <li>application of mappings to instance data</li>
          </ul>
          <li>CDM terminology</li>
          <ul>
            <li>Application Business Message &ndash; back-end app format</li>
            <li>Enterprise Business Message &ndash; CDM format</li>
          </ul>
        </ul>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Key Mapping</h1>
        </hgroup>
        <ul class="x-small">
          <li>What is key mapping</li>
          <ul>
            <li>Key = identifier of en entity in a back-end application</li>
            <li>Key Mapping = a mapping of an ID of an entity in one system to an ID of the same entity in another system.</li>
            <li>Key mapping is realized using universal IDs (UID)</li>
          </ul>
          <li>Example</li>
          <ul>
            <li>A customer MOON exists in CRM and OMS systems</li>
            <li>In CRM system, MOON has an <code>CRM-ID=AB1</code></li>
            <li>In OMS system, MOON has an <code>CRM-ID=45A</code></li>
            <li>Key mappig allows to map the <code>CRM-ID AB1</code> to the <code>OMS-ID 45A</code></li>
            <li>Key mapping is a table</li>
            <ul class="no-bullet">
              <li><code>CRM-ID &rarr; UID &rarr; OMS-ID</code></li>
            </ul>
          </ul>
        </ul>
      </div>

      <div class="slide">
        <hgroup>
          <h1>Key Mapping Example</h1>
        </hgroup>
        <div id="1G4XbrYDV4ptT6GvXzWHio5bp2tfRpZd8MwrOpCcIR0U" class="h-drawing" style="height: 410px; margin-top: 60px"></div>
      </div>
    </section>

  </section>

  <div class="slide outline"></div>

  <section>
    <header>Microservices Architecture</header>

    <div class="slide">
      <hgroup>
        <h1>The Scale Cube</h1>
      </hgroup>
      <ul class="x-small">
        <li>Three-dimensional scalability model</li>
        <ul>
          <li>X-Axis scaling requests across multiple instances</li>
          <li><b>Y-Axis scaling decomposes an application into micro-services</b></li>
          <li>Z-Axis scaling requests across "data partitioned" instances</li>
        </ul>
        <img src="img/scale-cube.png" style="zoom: 0.9"></img>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Overview</h1>
      </hgroup>
      <ul>
        <li>Emerging software architecture</li>
        <ul>
          <li>monolithic vs. decoupled applications</li>
          <li>applications as independenly deployable services</li>
        </ul>
        <img src="img/microservices.png" style="zoom: 0.7"></img>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Major Characteristics</h1>
      </hgroup>
      <ul>
        <li>Loosely coupled</li>
        <ul>
          <li>Integrated using well-defined interfaces</li>
        </ul>
        <li>Technology-agnostic protocols</li>
        <ul>
          <li>HTTP, they use REST architecture</li>
        </ul>
        <li>Independently deployable and easy to replace</li>
        <ul>
          <li>A change in small part requires to redeploy only that part</li>
        </ul>
        <li>Organized around capabilities</li>
        <ul>
          <li>such as accounting, billing, recommendation, etc.</li>
        </ul>
        <li>Impplemented using different technologies</li>
        <ul>
          <li>polyglot &ndash; programming languages, databases</li>
        </ul>
        <li>Owned by a small team</li>
      </ul>
    </div>

  </section>




</body>

</html>
