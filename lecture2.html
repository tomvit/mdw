<!DOCTYPE html>
<!--
    Middleware and Web Services, CTU course slides
    (cc) 2010-2012 Tomas Vitvar, http://vitvar.com
    written for Humla, an open source HTML5 presentation environment
-->
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="course" content="Middleware and Web Services" />
  <meta name="lecture" content="Lecture 2" />
  <meta name="keywords" content="SOA, service concepts, service technologies, SOAP, REST, WSDL" />

  <link type="text/css" rel="stylesheet" href="css/meta.css">
  </link>
  <link type="text/css" rel="stylesheet" href="css/ctu-fit.css">
  </link>
  <link type="text/css" rel="stylesheet" href="humla/lib/core/humla.css">
  </link>

  <script type="text/javascript" src="humla/lib/humla.js"></script>
  <title>Service Architecture</title>
</head>

<body>
  <footer>
    <p><b>#META_LECTURE#: #TITLE#</b>,&nbsp;<span class="meta_semester" />,&nbsp;
      <span class="meta_twitter" /></p>
    <p><b>&#8210; #SLIDE_NO# &#8210;</b></p>
  </footer>

  <div class="slide intro">
    <hgroup>
      <h1><span class="meta_course" /></h1>
      <h2>#META_LECTURE#: #TITLE#</h2>
    </hgroup>
    <div class="author">
      <p class="meta_author" />
      <p><span class="meta_email" /> &bull; <span class="meta_twitter" /> &bull;
        <span class="meta_web" /></p>
    </div>
    <center>
      <div class="meta_logo"></div>
    </center>
    <div class="org">
      <p class="meta_org" />
      <p><span class="meta_orgfac" /> &bull; <span class="meta_field" />
        &bull; <span class="meta_orgweb" /></p>
    </div>
    <div class="etc">
      <div class="text-info">
        Modified: #LAST_MODIFIED#<br />
        Humla v#HUMLA_VERSION#
      </div>
      <a href="http://creativecommons.org/licenses/by-sa/3.0/">
        <div class="license"></div>
      </a>
      <div class="oppa"></div>
    </div>
  </div>

  <div class="slide outline"></div>

  <section>
    <header>Integrating Applications</header>

    <div class="slide">
      <hgroup>
        <h1>Integration and Interoperability</h1>
      </hgroup>
      <ul class="small spacing">
        <li>Integration</li>
        <ul>
          <li>A process of connecting applications so that they can
            exchange and share capabilities, that is &mdash; information and functionalities.</li>
          <li>Includes methodological approaches as well as technologies</li>
        </ul>
        <li>Interoperability</li>
        <ul>
          <li>Ability of two or more applications to understand each other</li>
          <li>Interoperability levels</li>
          <ul>
            <li>Data &ndash; syntax/structure and semantics</li>
            <li>Functions/Processes &ndash; syntax and semantics</li>
            <li>Technical aspects &ndash; protocols, network addresses, etc.</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Integration Approaches Overview</h1>
      </hgroup>
      <div id="1i5jXogsSgaBZzCMpgtnXdTYaJ_rjbj_AeXEvkH9ljBI" class="h-drawing" style="height: 480px"></div>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Data-oriented Integration</h1>
      </hgroup>
      <div class="h-drawing" style="height: 140px" id="103hhb19k8lNgnHJ4ul5kpR7cUb7L1tmVFnoXtq15M5A"></div>
      <ul class="x-small">
        <li>Third-party database access</li>
        <ul>
          <li>Application D accesses a database of application B directly
            by using SQL and a knowledge of database B structure and constraints</li>
          <li>In the past: monolithic and two-tier client/server architectures</li>
          <li>Today: ETL (Extract, Transform, Load) technologies</li>
        </ul>
        <li>Problems</li>
        <ul>
          <li>App D must understand complex structures and constraints</li>
          <ul>
            <li>Data &ndash; very complex, includes structure and integrity constraints</li>
            <li>Functions/processes &ndash; hidden in integrity constraints</li>
            <li>Technical &ndash; access mechanisms can vary</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Service-oriented Integration</h1>
      </hgroup>
      <div class="h-drawing" style="height: 120px" id="1gqZkpqGJixejTLWZrZCE45iZo-2j3_rDgaRs3Qq4rN4"></div>
      <ul class="x-small">
        <li>Integration at the application layer</li>
        <ul>
          <li>Application exposes services that other applications consume</li>
          <li>Services hide implementation details but only define interfaces for integration</li>
        </ul>
        <li>Problems</li>
        <ul>
          <li>Can become unmanageable if not properly designed</li>
          <li>Interoperability</li>
          <ul>
            <li>Data &ndash; limited to input and output messages only</li>
            <li>Functions/processes &ndash; limited to semantics of services</li>
            <li>Technical &ndash; access mechanisms can vary</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Integration and Types of Data</h1>
      </hgroup>
      <ul class="x-small">
        <li>Real-time data &ndash; Web services</li>
        <ul>
          <li>Service-oriented integration</li>
          <li>online, realtime communication between a client and a service</li>
          <li>Usually small data and small amount of service invocation in a process</li>
        </ul>
        <li>Bulk data &ndash; ETL</li>
        <ul>
          <li>Data-oriented integration</li>
          <li>processing of large amount of data in batches</li>
        </ul>
        <li><b>ESB provides both Web service and ETL capabilities</b></li>
      </ul>
    </div>
  </section>

  <div class="slide outline"></div>

  <section>
    <header>Service Definition</header>

    <div class="slide">
      <hgroup>
        <h1>Web Service Architecture</h1>
      </hgroup>
      <ul class="x-small">
        <li>Web Service Architecture</li>
        <ul>
          <li>Defined by W3C in <span id="ws-arch" class="h-ref">Web Service Architecture Working Group Note</span></li>
          <li>Defines <b>views</b></li>
          <ul>
            <li>message-oriented view (WSDL and SOAP)</li>
            <li>resource-oriented view (REST and HTTP)</li>
          </ul>
          <li>Defines <b>architecture entities</b> and their <b>interactions</b></li>
          <ul>
            <li>Abstraction over underlying technology</li>
            <li>Basis for service usage processes and description languages</li>
          </ul>
        </ul>
        <li>Service Oriented Architecture</li>
        <ul>
          <li>Collection of tools, methods and technologies</li>
          <li>There is some implicit understanding of SOA in the community such as</li>
          <ul>
            <li>SOA provides advances over Enterprise Application Integration</li>
            <li>SOA is realized by using SOAP, WSDL, (and UDDI) technologies</li>
            <li>SOA utilizes Enterprise Service Bus (ESB)</li>
          </ul>
          <li class="no-bullet">&rArr; ~&nbsp;a realization of Web Service Architecture message-oriented view</li>
        </ul>
      </ul>
    </div>

    <div class="slide" id="service-definition">
      <hgroup>
        <h1>Service</h1>
      </hgroup>
      <ul class="xx-small">
        <li>Difficult to agree on one definition</li>
        <li>Business definition</li>
        <ul>
          <li>A service realizes an effect that brings a business value
            to a service consumer</li>
          <ul>
            <li>for example, to pay for and deliver a book</li>
          </ul>
        </ul>
        <li>Conceptual definition</li>
        <ul>
          <li>service characteristics</li>
          <ul>
            <li>encapsulation, reusability, loose coupling, contracting,
              abstraction, discoverability, composability</li>
          </ul>
        </ul>
        <li>Logical definition</li>
        <ul>
          <li>service interface, description and implementation</li>
          <li>service usage process</li>
          <ul>
            <li>service use tasks, service types</li>
          </ul>
        </ul>
        <li>Architectural definition</li>
        <ul>
          <li>business service (also application service)</li>
          <ul>
            <li>external, exposed functionality of an application</li>
          </ul>
          <li>infrastructure service</li>
          <ul>
            <li>internal/technical, supports processing of requests</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Interface, Description and Implementation</h1>
      </hgroup>
      <div class="h-drawing" style="height: 240px" id="1i1A6rM7K34IVVLrJK_ETV7-shOTl9fuzPYjOfpUMrwY"></div>
      <ul class="x-small">
        <li>Terminology clarification</li>
        <ul>
          <li>service ~ service interface + service implementation</li>
          <li>WSDL service ~ service description in WSDL language</li>
          <li>SOAP service ~ a service interface is possible to access through SOAP protocol;
            there is a WSDL description usually available too.</li>
          <li>REST/RESTful service ~ service interface that conforms to REST architectural style and HTTP protocol</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Service Interface</h1>
      </hgroup>
      <ul class="x-small">
        <li>Service interface components</li>
        <ul>
          <li>Data</li>
          <ul>
            <li>Data model definition used by the service</li>
            <li>for example, input and output messages, representation of resources</li>
          </ul>
          <li>Functions</li>
          <ul>
            <li>operations and input and output data used by operations</li>
          </ul>
          <li>Process</li>
          <ul>
            <li>public process: how to consume the service's functionality</li>
            <li>orchestration: realization of the service's functionality by its implementation</li>
          </ul>
          <li>Technical</li>
          <ul>
            <li>security, usage aspects (SLA-Service Level Agreement)</li>
            <li>other technical details such as IP addresses, ports, protocols, etc.</li>
          </ul>
        </ul>
      </ul>
    </div>

    <div class="slide" id="effects">
      <hgroup>
        <h1>Public Process</h1>
      </hgroup>
      <ul class="x-small">
        <li>A state diagram</li>
        <ul>
          <li>operation of a service defines a <b>state transition</b> between two states.</li>
        </ul>
      </ul>
      <div class="h-drawing" style="height: 415px" id="1I1OVuy4H_wJ9Bxt0ZlC-Zy7pznXeub9QYHgEcqdAqz4"></div>
    </div>


    <div class="slide" id="service-characteristics">
      <hgroup>
        <h1>Service Characteristics</h1>
      </hgroup>
      <div class="h-drawing" id="1z7ZDZ2Eh-B_4H3DszyzTmaAdvTdUCy6Ig2PCRynUgmg" style="height: 420px; margin-top: 40px"></div>
    </div>

  </section>

  <div class="slide outline"></div>

  <section>
    <header>Service Communication</header>

    <div class="slide">
      <hgroup>
        <h1>Application Protocols</h1>
      </hgroup>
      <ul class="x-small">
        <li>Remember this</li>
      </ul>
      <div class="h-drawing" id="19zJkisQOr32yxVeMcXEi7B3fHAtSot0c_ppDJeKl4bc" style="height: 120px; margin-top: -10px"></div>
      <ul class="x-small">
        <li>App protocols mostly on top of the TCP Layer</li>
        <ul>
          <li>use TCP socket for communication</li>
        </ul>
        <li>Major protocols</li>
        <ul>
          <li>HTTP &#150; most of the app protocols layered on HTTP</li>
          <ul>
            <li>wide spread, but: implementors often break HTTP semantics</li>
          </ul>
          <li>RMI &#150; Remote Method Invocation</li>
          <ul>
            <li>Java-specific, rather interface</li>
            <li>may use HTTP underneath (among other things)</li>
          </ul>
          <li>XML-RPC &#150; Remote Procedure Call and SOAP</li>
          <ul>
            <li>Again, HTTP underneath</li>
          </ul>
          <li>WebSocket &#150; new protocol part of HTML5</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Socket</h1>
      </hgroup>
      <div class="h-drawing" style="height: 140px" id="1Z4OmMLdUPPmmfAsENj7zBb_kjDOWVUzku50WucxpePU"></div>
      <ul class="xx-small">
        <li>Handshaking (connection establishment)</li>
        <ul>
          <li>The server listens at <code>[dst_ip,dsp_port]</code></li>
          <li>Three-way handshake:</li>
          <ul>
            <li>the client at <code>[src_ip,src_port]</code> sends a connection request</li>
            <li>the server responds</li>
            <li>the client acknowledges the response, can send data along</li>
          </ul>
          <li>Result is a socket (virtual communication channel) with unique identification:<br />
            <code>socket=[src_ip,src_port;dst_ip,dst_port]</code></li>
        </ul>
        <li>Data transfer (resource usage)</li>
        <ul>
          <li>Client/server writes/reads data to/from the socket</li>
          <li>TCP features: reliable delivery, correct order of packets, flow control</li>
        </ul>
        <li>Connection close</li>
      </ul>
    </div>

    <div class="slide" id="sync-async-comm">
      <hgroup>
        <h1>Synchronous and Asynchronous Communication</h1>
      </hgroup>
      <div class="h-drawing" style="height: 220px" id="14daki2YQxkRxkpg_RW16-Efihlxzhep8AWXb226NaQA"></div>
      <ul class="x-small">
        <li>Synchronous</li>
        <ul>
          <li>one socket, |t<sub>req</sub> &#150; t<sub>res</sub>| is small</li>
          <li>easy to implement and deploy, only standard firewall config</li>
          <li>only the server defines endpoint</li>
        </ul>
        <li>Asynchronous</li>
        <ul>
          <li>request, response each has socket, client and server define endpoints</li>
          <li>|t<sub>req</sub> &#150; t<sub>res</sub>| can be large (hours, even days)</li>
          <li>harder to do across network elements (private/public networks issue)</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Asynchronous via Intermediary</h1>
      </hgroup>
      <div class="h-drawing" style="height: 220px" id="1mh4fk7kNmLyqVT1Cks4rRFRpGjFcU1yStOYQw2uiew8"></div>
      <ul class="x-small">
        <li>Intermediary</li>
        <ul>
          <li>A component that decouples a client-server communication</li>
          <li>It increases reliability and performance</li>
          <ul>
            <li>The server may not be available when a client sends a request</li>
            <li>There can be multiple servers that can handle the request</li>
          </ul>
        </ul>
        <li>Further Concepts</li>
        <ul>
          <li>Message Queues (MQ) &ndash; queue-based communication</li>
          <li>Publish/Subscribe (P/S) &ndash; event-driven communication</li>
        </ul>
      </ul>
    </div>

    <div class="slide">
      <hgroup>
        <h1>Asynchronous via Polling</h1>
      </hgroup>
      <div class="h-drawing" style="height: 220px" id="1F3GsWbkka-hDU75qAzFl1OlhtMMHt_gfxE9m3CcvlAk"></div>
      <ul class="x-small">
        <li>Polling &ndash; only clients open sockets</li>
        <ul>
          <li>A client performs multiple request-response interactions</li>
          <ul>
            <li>The first interaction initiates a process on the server</li>
            <li>Subsequent interactions check for the processing status</li>
            <li>The last interaction retrieves the processing result</li>
          </ul>
        </ul>
        <li>Properties of environments</li>
        <ul>
          <li>A server cannot open a socket with the client (network restrictions)</li>
          <li>Typically on the Web (a client runs in a browser)</li>
        </ul>
      </ul>
    </div>

		<div class="slide">
			<hgroup>
				<h1>Blocking I/O Model</h1>
			</hgroup>
			<ul class="small">
				<li>The server creates a thread for every connection</li>
				<ul>
					<li>For example, 1K connections = 1K threads, big overhead</li>
				</ul>
			</ul>
			<div id="1QP7gZSS1WS3YquzLekSgdZfcmi4BYArm-K9tuWrULQs" class="h-drawing" style="height: 220px"></div>
			<ul class="small">
				<li>Characteristics</li>
				<ul>
					<li>the thread is reserved for the connection</li>
					<li>When processing of the request requires other interactions with DB/FS or network
						communication is slow</li>
					<ul>
						<li>scales very bad as the thread's execution is "blocked"</li>
					</ul>
				</ul>
			</ul>
		</div>

		<div class="slide">
			<hgroup>
				<h1>Non-Blocking I/O Model</h1>
			</hgroup>
			<ul class="small">
				<li>Connections maintained by the OS, not the Web app</li>
				<ul>
					<li>The Web app registers events, OS triggers events when occur</li>
				</ul>
			</ul>
			<div id="1kxkFc3Chl4qFXxH_4f2seuNbpBdENMyZWMRUmxd1p28" class="h-drawing" style="height: 220px"></div>
			<ul class="small">
				<li>Characteristics</li>
				<ul>
					<li>Event examples: new connection, read, write, closed</li>
					<li>The app may create working threads, but controls the number!</li>
					<ul>
						<li>much less number of working threads as opposed to blocking I/O</li>
					</ul>
				</ul>
			</ul>
		</div>


  </section>



</body>

</html>