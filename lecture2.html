<!DOCTYPE html>
<!--
    Middleware and Web Services, CTU course slides
    (cc) 2010-2012 Tomas Vitvar, http://vitvar.com
    written for Humla, an open source HTML5 presentation environment
-->
<html>  
    <head>
    	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
        <meta name="course"   content="Middleware and Web Services"/>
		<meta name="lecture"  content="Lecture 2"/>
   		<meta name="keywords" content="SOA, service concepts, service technologies, SOAP, REST, WSDL"/>
           
        <link type="text/css" rel="stylesheet" href="css/meta.css"></link>   
        <link type="text/css" rel="stylesheet" href="css/ctu-fit.css"></link>   
        <link type="text/css" rel="stylesheet" href="humla/lib/core/humla.css"></link>   

        <script type="text/javascript" src="humla/lib/humla.js"></script>
        <title>Service Architecture and Technologies</title>
	</head>
	
	<body>
		<footer>
			<p><b>#META_LECTURE#: #TITLE#</b>,&nbsp;<span class="meta_semester"/>,&nbsp;
			<span class="meta_twitter"/></p>
			<p><b>&#8210; #SLIDE_NO# &#8210;</b></p>
		</footer>

    	<div class="slide intro">
			<hgroup>
				<h1><span class="meta_course"/></h1>
 				<h2>#META_LECTURE#: #TITLE#</h2>
			</hgroup>
			<div class="author">
				<p class="meta_author"/>
				<p><span class="meta_email"/> &bull; <span class="meta_twitter"/> &bull; 
				<span class="meta_web"/></p>
			</div>
			<center><div class="meta_logo"></div></center>
			<div class="org">
				<p class="meta_org"/>
				<p><span class="meta_orgfac"/> &bull; <span class="meta_field"/> 
				&bull; <span class="meta_orgweb"/></p>
			</div>
			<div class="etc">
        		<div class="text-info">
    				Modified: #LAST_MODIFIED#<br/>
					Humla v#HUMLA_VERSION#
				</div>
				<a href="http://creativecommons.org/licenses/by-sa/3.0/"><div class="license"></div></a>
				<div class="oppa"></div>
			</div>
		</div>

        <div class="slide outline"></div>
        
        <section>
            <header>Integrating Applications</header>

            <div class="slide">
                <hgroup>
                    <h1>Integration and Interoperability</h1>
                </hgroup>
                <ul class="small spacing">
                    <li>Integration</li>
                    <ul>
                        <li>A process of connecting applications so that they can
                        exchange and share capabilities, that is &mdash; information and functionalities.</li>
                        <li>Includes methodological approaches as well as technologies</li>
                    </ul>
                    <li>Interoperability</li>
                    <ul>
                        <li>Ability of two or more applications to understand each other</li>
                        <li>Interoperability levels</li>
                        <ul>
                            <li>Data &ndash; syntax/structure and semantics</li>
                            <li>Functions/Processes &ndash; syntax and semantics</li>
                            <li>Technical aspects &ndash; protocols, network addresses, etc.</li>
                        </ul>
                    </ul>
                </ul>
            </div>

            <div class="slide">
                <hgroup>
                    <h1>Integration Approaches Overview</h1>
                </hgroup>
                <div id="1i5jXogsSgaBZzCMpgtnXdTYaJ_rjbj_AeXEvkH9ljBI" class="h-drawing" style="height: 480px"></div>
            </div>

            <div class="slide">
                <hgroup>
                    <h1>Data-oriented Integration</h1>
                </hgroup>
                <div class="h-drawing" style="height: 140px" 
                    id="103hhb19k8lNgnHJ4ul5kpR7cUb7L1tmVFnoXtq15M5A"></div>                        
                <ul class="x-small">
                    <li>Third-party database access</li>
                    <ul>
                        <li>Application D accesses a database of application B directly 
                        by using SQL and a knowledge of database B structure and constraints</li>
                        <li>In the past: monolithic and two-tier client/server architectures</li>
                        <li>Today: ETL (Extract, Transform, Load) technologies</li>
                    </ul>
                    <li>Problems</li>
                    <ul>
                        <li>App D must understand complex structures and constraints</li>
                        <ul>
                            <li>Data &ndash; very complex, includes structure and integrity constraints</li>
                            <li>Functions/processes &ndash; hidden in integrity constraints</li>
                            <li>Technical &ndash; access mechanisms can vary</li>
                        </ul>
                    </ul>
                </ul>
            </div>
            
            <div class="slide">
                <hgroup>
                    <h1>Service-oriented Integration</h1>
                </hgroup>
                <div class="h-drawing" style="height: 120px" id="1gqZkpqGJixejTLWZrZCE45iZo-2j3_rDgaRs3Qq4rN4"></div>
                <ul class="x-small">
                    <li>Integration at the application layer</li>
                    <ul>
                        <li>Application exposes services that other applications consume</li>
                        <li>Services hide implementation details but only define interfaces for integration</li>
                    </ul>
                    <li>Problems</li>
                    <ul>
                        <li>Can become unmanageable if not properly designed</li>
                        <li>Interoperability</li>
                        <ul>
                            <li>Data &ndash; limited to input and output messages only</li>
                            <li>Functions/processes &ndash; limited to semantics of services</li>
                            <li>Technical &ndash; access mechanisms can vary</li>
                        </ul>
                    </ul>
                </ul>
            </div>

            <div class="slide">
                <hgroup>
                    <h1>Integration and Types of Data</h1>
                </hgroup>
                <ul class="x-small">
                    <li>Transactional data &ndash; Web services</li>
                    <ul>
                        <li>Service-oriented integration</li>
                        <li>online, realtime communication between a client and a service</li>
                        <li>Usually small amount of data and small amount of service invocation in a process</li>
                    </ul>
                    <li>Bulk data &ndash; ETL</li>
                    <ul>
                        <li>Data-oriented integration</li>
                        <li>processing of large amount of data in batches</li>
                    </ul>
                    <li><b>ESB provides both Web service and ETL capabilities</b></li>
                </ul>
            </div>
        </section>
        
        <div class="slide outline"></div>
        
        <section>
            <header>Service Definition</header>
            
			<div class="slide">
				<hgroup>
					<h1>Web Service Architecture</h1>
				</hgroup>
				<ul class="x-small">
                    <li>Web Service Architecture</li>
                    <ul>
                        <li>Defined by W3C in <span id="ws-arch" class="h-ref">Web Service Architecture Working Group Note</span></li>
                        <li>Defines <b>views</b></li>
                        <ul>
                            <li>message-oriented view (WSDL and SOAP)</li>
                            <li>resource-oriented view (REST and HTTP)</li>
                        </ul>
                        <li>Defines <b>architecture entities</b> and their <b>interactions</b></li>
                        <ul>
                            <li>Abstraction over underlying technology</li>
                            <li>Basis for service usage processes and description languages</li>
                        </ul>
                    </ul>
                    <li>Service Oriented Architecture</li>
                    <ul>
                        <li>Collection of tools, methods and technologies</li>
                        <li>There is some implicit understanding of SOA in the community such as</li>
                        <ul>
                            <li>SOA provides advances over Enterprise Application Integration</li>
                            <li>SOA is realized by using SOAP, WSDL, (and UDDI) technologies</li>
                            <li>SOA utilizes Enterprise Service Bus (ESB)</li>
                        </ul>
                        <li class="no-bullet">&rArr; ~&nbsp;a realization of Web Service Architecture message-oriented view</li>
                    </ul>
				</ul>
			</div>
            
			<div class="slide" id="service-definition">
				<hgroup>
					<h1>Service</h1>
				</hgroup>
				<ul class="xx-small">
                    <li>Difficult to agree on one definition</li>
					<li>Business definition</li>
					<ul>
						<li>A service realizes an effect that brings a business value
						to a service consumer</li>
                        <ul>
						    <li>for example, to pay for and deliver a book</li>
                        </ul>
					</ul>
					<li>Conceptual definition</li>
					<ul>
						<li>service characteristics</li>
                        <ul>
						    <li>encapsulation, reusability, loose coupling, contracting, 
						    abstraction, discoverability, composability</li>
                        </ul>
					</ul>
					<li>Logical definition</li>
					<ul>
						<li>service interface, description and implementation</li>
						<li>service usage process</li>
						<ul>
                            <li>service use tasks, service types</li>
                        </ul>
					</ul>
                    <li>Architectural definition</li>
                    <ul>
                        <li>business service (also application service)</li>
                        <ul>
                           <li>external, exposed functionality of an application</li>
                        </ul>
                        <li>infrastructure service</li>
                        <ul>
                            <li>internal/technical, supports processing of requests</li>
                        </ul>
                    </ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Interface, Description and Implementation</h1>
				</hgroup>
                <div class="h-drawing" style="height: 240px" id="1i1A6rM7K34IVVLrJK_ETV7-shOTl9fuzPYjOfpUMrwY"></div>
                <ul class="x-small">
                    <li>Terminology clarification</li>
                    <ul>
                        <li>service ~ service interface + service implementation</li>
                        <li>WSDL service ~ service description in WSDL language</li>
                        <li>SOAP service ~ a service interface is possible to access through SOAP protocol; 
                        there is a WSDL description usually available too.</li>
                        <li>REST/RESTful service ~ service interface that conforms to REST architectural style and HTTP protocol</li>
                    </ul>
                </ul>
			</div>					

      <div class="slide">
        <hgroup>
          <h1>Service Interface</h1>
        </hgroup>
        <ul class="x-small">
          <li>Service interface components</li>
            <ul>
              <li>Data</li>
              <ul>
                <li>Data model definition used by the service</li>
                <li>for example, input and output messages, representation of resources</li>
              </ul>
              <li>Functions</li>
              <ul>
                <li>operations and input and output data used by operations</li>
              </ul>
                <li>Process</li>
              <ul>
                <li>public process: how to consume the service's functionality</li>
                <li>orchestration: realization of the service's functionality by its implementation</li>
              </ul>
              <li>Technical</li>
              <ul>
                <li>security, usage aspects (SLA-Service Level Agreement)</li>
                <li>other technical details such as IP addresses, ports, protocols, etc.</li>
              </ul>
            </ul>
        </ul>
      </div>	

      <div class="slide" id="effects">
        <hgroup>
          <h1>Public Process</h1>
        </hgroup>
        <ul class="x-small">
                <li>A state diagram</li>
                <ul>
                    <li>operation of a service defines a <b>state transition</b> between two states.</li>
                </ul>
            </ul>
            <div class="h-drawing" style="height: 415px" id="1I1OVuy4H_wJ9Bxt0ZlC-Zy7pznXeub9QYHgEcqdAqz4"></div>
      </div>	


			<div class="slide" id="service-characteristics">
				<hgroup>
					<h1>Service Characteristics</h1>
				</hgroup>
				<div class="h-drawing" id="1z7ZDZ2Eh-B_4H3DszyzTmaAdvTdUCy6Ig2PCRynUgmg"
				  style="height: 420px; margin-top: 40px"></div>
			</div>					

        </section>

        <div class="slide outline"></div>

        <section>
            <header>Service Communication</header>

            <div class="slide">
                <hgroup>
                    <h1>Application Protocols</h1>
                </hgroup>                
                <ul class="x-small">
                    <li>Remember this</li>
                </ul>
                <div class="h-drawing" id="19zJkisQOr32yxVeMcXEi7B3fHAtSot0c_ppDJeKl4bc" style="height: 120px; margin-top: -10px"></div>
                <ul class="x-small">
                    <li>App protocols mostly on top of the TCP Layer</li>
                    <ul>
                        <li>use TCP socket for communication</li>
                    </ul>
                    <li>Major protocols</li>
                    <ul>
                        <li>HTTP &#150; most of the app protocols layered on HTTP</li>
                        <ul>
                            <li>wide spread, but: implementors often break HTTP semantics</li>                            
                        </ul>
                        <li>RMI &#150; Remote Method Invocation</li>
                        <ul>
                            <li>Java-specific, rather interface</li> 
                            <li>may use HTTP underneath (among other things)</li>
                        </ul>
                        <li>XML-RPC &#150; Remote Procedure Call and SOAP</li>
                        <ul>
                            <li>Again, HTTP underneath</li>
                        </ul>
                        <li>WebSocket &#150; new protocol part of HTML5</li>                        
                    </ul>
                </ul>
            </div>
            
            <div class="slide">
                <hgroup>
                    <h1>Socket</h1>
                </hgroup>            
				<div class="h-drawing" style="height: 140px" 
                    id="1Z4OmMLdUPPmmfAsENj7zBb_kjDOWVUzku50WucxpePU"></div>
				<ul class="xx-small">
					<li>Handshaking (connection establishment)</li>
					<ul>
                        <li>The server listens at <code>[dst_ip,dsp_port]</code></li>
                        <li>Three-way handshake:</li>
                        <ul>
                            <li>the client at <code>[src_ip,src_port]</code> sends a connection request</li> 
                            <li>the server responds</li>
                            <li>the client acknowledges the response, can send data along</li>
                        </ul>
                        <li>Result is a socket (virtual communication channel) with unique identification:<br/>
						<code>socket=[src_ip,src_port;dst_ip,dst_port]</code></li>
					</ul>
					<li>Data transfer (resource usage)</li>
					<ul>
						<li>Client/server writes/reads data to/from the socket</li>
                        <li>TCP features: reliable delivery, correct order of packets, flow control</li> 
					</ul>
					<li>Connection close</li>
				</ul>
            </div>
            
            <div class="slide" id="sync-async-comm">
                <hgroup>
                    <h1>Synchronous and Asynchronous Communication</h1>
                </hgroup>   
                <div class="h-drawing" style="height: 220px" 
                    id="14daki2YQxkRxkpg_RW16-Efihlxzhep8AWXb226NaQA"></div>                                
        <ul class="x-small">
                    <li>Synchronous</li>
                    <ul>
                <li>one socket, |t<sub>req</sub> &#150; t<sub>res</sub>| is small</li> 
                <li>easy to implement and deploy, only standard firewall config</li>
                <li>only the server defines endpoint</li>
                    </ul>
                    <li>Asynchronous</li>
                    <ul>
                        <li>request, response each has socket, client and server define endpoints</li>
                <li>|t<sub>req</sub> &#150; t<sub>res</sub>| can be large (hours, even days)</li> 
                <li>harder to do across network elements (private/public networks issue)</li>
                    </ul>
        </ul>
            </div>

            <div class="slide">
                <hgroup>
                    <h1>Asynchronous via Intermediary</h1>
                </hgroup>   
                <div class="h-drawing" style="height: 220px" 
                    id="1mh4fk7kNmLyqVT1Cks4rRFRpGjFcU1yStOYQw2uiew8"></div>                                
                <ul class="x-small">
                    <li>Intermediary</li>
                    <ul>
                        <li>A component that decouples a client-server communication</li>
                        <li>It increases reliability and performance</li>
                        <ul>
                            <li>The server may not be available when a client sends a request</li>
                            <li>There can be multiple servers that can handle the request</li>
                        </ul>
                    </ul>
                    <li>Further Concepts</li>
                    <ul>
                        <li>Message Queues (MQ) &ndash; queue-based communication</li>
                        <li>Publish/Subscribe (P/S) &ndash; event-driven communication</li> 
                    </ul> 
                </ul>
            </div>

            <div class="slide">
                <hgroup>
                    <h1>Asynchronous via Polling</h1>
                </hgroup>   
                <div class="h-drawing" style="height: 220px" 
                    id="1F3GsWbkka-hDU75qAzFl1OlhtMMHt_gfxE9m3CcvlAk"></div>                                
                <ul class="x-small">
                    <li>Polling &ndash; only clients open sockets</li>
                    <ul>
                        <li>A client performs multiple request-response interactions</li>
                        <ul>
                            <li>The first interaction initiates a process on the server</li>
                            <li>Subsequent interactions check for the processing status</li>
                            <li>The last interaction retrieves the processing result</li>
                        </ul>
                    </ul>
                    <li>Properties of environments</li>
                    <ul>
                        <li>A server cannot open a socket with the client (network restrictions)</li>
                        <li>Typically on the Web (a client runs in a browser)</li> 
                    </ul>
                </ul>
            </div>

        </section>

        <section>
            <header>REST</header>

            <div class="slide outline"></div>
            
            <section>
                <header>Introduction to REST</header>

                <div class="slide">
                    <hgroup>
                        <h1>Data on the Web</h1>
                    </hgroup>
                    <div class="h-drawing" style="height: 450px" 
                        id="161LY9K1fWd-G3iNpulEEEXq1yoxvjsQxombdyV4Yyfc"></div>
                </div>

                
        		<div class="slide">
        			<hgroup>
        				<h1>REST</h1>
        			</hgroup>
        			<ul class="small spacing">
                        <li>REST</li>
                        <ul>
                            <li>Representational State Transfer</li>
                        </ul>
        				<li>Architecture Style</li>
        				<ul>
        					<li>Roy Fielding &ndash; co-author of HTTP</li>
        					<li>He coined REST in his <span class="h-ref" id="rest">PhD thesis</span>.</li>
                            <ul>
                                <li>The thesis abstracts from HTTP technical details</li>
                                <li>HTTP is one of the REST implementation &rarr; <b>RESTful</b></li>
                                <li>REST is a leading programming model for Web APIs</li>
                            </ul>
        				</ul>
        				<li>REST (RESTful) proper design</li>
        				<ul>
        					<li>people break principles often</li>
        					<li>See <span class="h-ref" id="rest-anti">REST Anti-Patterns</span> for some details.<br/>
        				</ul>
        				<li>REST and Web Service Architecture</li>
        				<ul>
        					<li>REST is a realization of WSA resource-oriented model</li>
        				</ul>
        			</ul>			
        		</div>
                
                <div class="slide">
                    <hgroup>
                        <h1>REST and Web Architecture</h1>
                    </hgroup>
            		<ul class="small">
    					<li>Tim-Berners Lee</li>
    					<ul>
    						<li>"creator", father of the Web</li>
    					</ul>
    					<li>Key Principles</li>
    					<ul>
    						<li>Separation of Concerns</li>
                            <ul>
    						    <li>enables independent innovation</li>
                            </ul>
    						<li>Standards-based</li>
                            <ul>
    						    <li>common agreement, big spread and adoption</li>
                            </ul>
    						<li>Royalty-free technology</li>
                            <ul>
    						    <li>a lot of open source, no fees</li>
                            </ul> 
    					</ul>
    					<li>Architectural Basis</li>
    					<ul>
    						<li><b>Identification:</b> universal linking of resources using URI</li>
    						<li><b>Interaction:</b> protocols to retrieve resources &ndash; HTTP</li>
    						<li><b>Formats:</b> resource representation (data and metadata)</li>				
    					</ul>
    				</ul>                
                </div>      

                <div class="slide">
        			<hgroup>
        				<h1>HTTP Advantages</h1>
        			</hgroup>
        			<ul class="small spacing">
    					<li>Familiarity</li>
    					<ul>
    						<li>HTTP protocol is well-known and widely used</li>
    					</ul>
    					<li>Interoperability</li>
    					<ul>
    						<li>All environments have HTTP client libraries</li>
                            <ul>
    						    <li>technical interoperability is thus no problem</li>
                                <li>no need to deal with vendor-specific interoperability issues</li>
                            </ul>
    						<li>You can focus on the core of the integration problem</li>
                            <ul>
    						    <li>application (domain, content) interoperability</li>
                            </ul>
    					</ul>
    					<li>Scalability</li>
    					<ul>
    						<li>you can use highly scalable Web infrastructure</li>
    						<ul>
                                <li>caching servers, proxy servers, etc.</li>
                            </ul>
    						<li>HTTP features such as HTTP GET idempotence and safe 
                                allow you to use caching</li>
    					</ul>
    				</ul>
        		</div>
                
                <div class="slide">
            		<hgroup>
        				<h1>REST Core Principles</h1>
        			</hgroup>
                    <ul class="small">
                        <li>REST architectural style defines constraints</li>
                        <ul>
                            <li>if you follow them, they help you to achieve a good design, 
                            interoperability and scalability.</li>
                        </ul>
                        <li>Constraints</li>
                        <ul>
                            <li>Client/Server</li>
                            <li>Statelessness</li>
                            <li>Cacheability</li>
                            <li>Layered system</li>
                            <li>Uniform interface</li>
                        </ul>
                        <li>Guiding principles</li>                        
                        <ul>    
                            <li>Identification of resources</li>
                            <li>Representations of resources and self-descriptive messages</li>
                            <li>Hypermedia as the engine of application state (HATEOAS)</li> 
                        </ul>
                    </ul>
        		</div>

                <div class="slide">
        			<hgroup>
    					<h1>Resource</h1>
    				</hgroup>
                    <ul class="x-small">
                        <li>A resource can be anything such as</li>
                        <ul>
                            <li>A real object: car, dog, Web page, printed document</li>
                            <li>An abstract thing such as address, name, etc. &rarr; RDF</li>
                        </ul>
                        <li>A resource in REST</li>
                        <ul>
                            <li>A resource corresponds to one or more entities of a data model</li>
                            <li>A representation of a resource can be conveyed in a message electronically (information resource)</li>
                            <li>A resource has an identifier and a representation and a client can apply an access to it</li>
                        </ul>
                    </ul>
    				<div class="h-drawing" style="height: 200px" 
                        id="1sSCJVFnKU0UgLek_FlFdQfKVeT9myKf-34IYyw5FQps"></div>
    			</div>

            	<div class="slide">
        			<hgroup>
        				<h1>Access to a Resource</h1>
        			</hgroup>
        			<div class="h-drawing" style="height: 290px;" 
        				id="1hw7HbAaK09w3I1mtmsJZMb3_OsYpFlBrrJjJRGsz23g"></div>
                    <ul class="x-small">
                        <li>Terminology</li>
                        <ul>
                            <li>Client = User Agent</li>
                            <li><b>Dereferencing URI</b> &ndash; a process of obtaining a protocol from the URI and creating a request.</li>
                            <li><b>Access</b> &ndash; a process of sending a request and obtaining a response as a result; 
                            access usually realized through HTTP.</li>
                        </ul>
                    </ul>
        		</div>

            </section>
            
            <div class="slide outline"></div>
        
            <section>
                <header>Uniform Resource Identifier</header>
        
    			<div class="slide">
    				<hgroup>
                        <h1>URI, URL, URN</h1>
    				</hgroup>
    				<ul class="small spacing">
    					<li>URI &ndash; Uniform Resource Identifier</li>
    					<ul>
    						<li>URI only identifies a resource</li>
                            <ul>
    						    <li>it does not imply the resource physically exists</li>
                            </ul>
    						<li>URI could be URL (locator) or URN (name)</li>
    					</ul>
    					<li>URL &ndash; Uniform Resource Locator</li>
    					<ul>	
    						<li>in addition allows to locate the resource</li>
                            <ul>
    						    <li>that is &mdash; its network location</li>
                            </ul>
    						<li>every URL is URI but an URI does not need to be URL</li>
    					</ul>
    					<li>URN &ndash; Uniform Resource Name</li>
    					<ul>
    						<li>refers to URI under "urn" scheme (<span class="h-ref" id="rfc-2141">RFC 2141</span>)</li>
    						<li>require to be globally unique and persistent</li>
                            <ul>
    						    <li>even if the resource cease to exist/becomes unavailable</li>
                            </ul>
    					</ul>
    				</ul>
    			</div>
                                
    			<div class="slide">
    				<hgroup>
    					<h1>URI</h1>
    				</hgroup>
    				<ul class="x-small">
                        <li>Definition</li>
                        <pre class="brush: plain; gutter: 'false'; class-name: 'tight'">
                            URI = scheme ":" [ "//" authority ] [ "/" path ] [ "?" query ] [ "#" frag ]
    				    </pre>
    					<li>Hierarchal sequence of components</li>
                        <ul>
    						<li><code>scheme</code></li>
    						<ul>
    							<li>refers to a spec that assigns IDs within that scheme</li>
    							<li>examples: <code>http</code>, <code>ftp</code>, <code>mailto</code>, <code>urn</code></li>
                                <li><code>scheme != protocol</code></li>
    						</ul>
    						<li><code>authority</code></li>
    						<ul>
    							<li>registered name (domain name) or server address</li>
    							<li>optional port and user</li>
    						</ul>
    						<li><code>path and query</code></li>
    						<ul>
    							<li>identify resource within the scheme and authority scope</li>
    							<li>path &ndash; hierarchal form</li>
    							<li>query &ndash; non-hierarchal form (parameters key=value)</li>
    						</ul>
    						<li><code>fragment</code></li>
    						<ul>
    							<li>reference to a secondary resource within the primary resource</li>
    						</ul>
                        </ul>
    				</ul>
    			</div>
                
                    <div class="slide">
        				<hgroup>
        					<h1>Resources over Entities</h1>
        				</hgroup>                
                        <ul class="x-small">
                            <li>Application's data model</li>
                            <ul>
                                <li>Entities and properties that the app uses for its data</li>
                            </ul>
                            <div class="h-drawing" style="height: 290px" id="1zT46lCNzfiaw9d5HfA6fzDZFAj2GQG8sRAg1QRWPPfQ"></div>
                            <li>URI identifies a resource within the app's data model</li>
                            <ul>
                                <li><code>path</code> &ndash; a "view" on the data model</li>
                                <ul>
                                    <li>data model is a graph</li>
                                    <li>URI identifies a resource using a path in a tree with some root</li>
                                </ul>
                            </ul>
                        </ul>
                    </div>
        
                    <div class="slide">
            			<hgroup>
        					<h1>Examples of Views</h1>
        				</hgroup>                
                        <ul class="x-small">
                            <li>View 1</li>
                            <ul>
                                <li>all customers: <code>/customers</code></li>
                                <li>a particular customer: <code>/customers/{customer-id}</code>
                                <li>All orders of a customer: <code>/customers/{customer-id}/orders</code>
                                <li>A particular order: <code>/customers/{customer-id}/orders/{order-id}</code>
                            </ul>
                            <li>View 2</li>
                            <ul>
                                <li>all orders: <code>/orders</code></li>
                                <li>All orders of a customer: <code>/orders/{customer-id}</code>
                                <li>A particular order: <code>/orders/{customer-id}/{order-id}</code>
                            </ul>
                            <li class="no-bullet">&rArr; Design issues</li>
                            <li>Good design practices</li>
                            <ul>
                                <li>No need for 1:1 relationship between resources and data entities</li> 
                                <ul>
                                    <li>A resource may aggregate data from two or more entities</li>
                                    <li>Thus only expose resources if it makes sense for the service</li>
                                </ul>
                                <li>Try to limit URI aliases, make it simple and clear</li>
                            </ul>
                            </ul>
                        </ul>
                    </div>
        
                    <div class="slide">
                		<hgroup>
        					<h1>Path vs. Query</h1>
        				</hgroup>                
                        <ul class="x-small">
                            <li>Path</li>
                            <ul>
                                <li>Hierarchical component, a view on the data</li>
                                <li>The main identification of the resource</li>
                            </ul>
                            <li>Query</li>
                            <ul>
                                <li>Can define selection, projection or other processing instructions</li>
                                <li>Selection</li>
                                <ul>
                                    <li>filters entries of a resource by values of properties<br/>
                                    <code>/customers/?status=valid</code></li>
                                </ul>
                                <li>Projection</li>
                                <ul>
                                    <li>filters properties of resource entries<br/>
                                    <code>/customers/?properties=id,name</code></li>
                                </ul>
                                <li>Processing instructions examples</li>
                                <ul>
                                    <li>data format of the resource &rarr; cf. URI opacity<br/>
                                    <code>/customers/?format=JSON</code></li>
                                    <li>Access keys such as API keys<br/>
                                    <code>/customers/?key=3ae56-56ef76-34540aeb</code></li>
                                </ul>
                            </ul>
                        </ul>
                    </div>

        			<div class="slide">
        				<hgroup>
        					<h1>Fragment</h1>
        				</hgroup>
        				<ul class="small">
        					<li>Primary resource</li>
        					<ul>
                                <li>Defined by URI path and query</li>
        						<li>could be complex, composed resources</li>
        					</ul>
        					<li>Sub-resource/secondary resource</li>
        					<ul>
                                <li>Can be defined by a fragment</li>
        						<li>No explicit relationship between primary and sub-resource</li>
                                <ul>
                                    <li>For example, we cannot infer that the two resources are in <code>part-of</code>, 
                                    or <code>sub-class-of</code> relationships.</li>
                                </ul>
                                <li>Fragment semantics defined by a data format</li>
        					</ul>
                            <li>Usage of fragment</li>
                            <ul>
                                <li>identification of elements in HTML</li>
                                <li>URI references in RDF</li>
                                <li>State of an application in a browser</li>
                            </ul>
                        </ul>
                    </div>

            		<div class="slide">
        				<hgroup>
        					<h1>Fragment Semantics</h1>
        				</hgroup>
        				<ul class="small">                
                            <li>Fragment semantics for HTML</li>
                            <ul>
                                <li>assume that <code>orders.html</code> are in <code>HTML</code> format.</li>
                            </ul>
                            <pre class="brush: plain">
                                http://company.com/tomas/orders.html#3456
                            </pre>
                            <ul>
                                <li class="no-bullet">&rArr; there is a HTML element with <code>id=3456</code></li>
                            </ul>
                            <li>But:</li>
                            <ul>
                                <li>Consider <code>orders</code> resource in <code>application/xml</code></li>
                            </ul>
                            <pre class="brush: xml">
                                &lt;orders>
                                    &lt;order id="3456">...&lt;/order>
                                    ...
                                &lt;/orders>
                            </pre>
                            <ul>
                                <li>Can't say that <code>http://company.com/tomas/orders.xml#3456</code> identifies 
                                an order element within the <code>orders</code> resource.</li>
                                <li><code>application/xml</code> content type does not define fragment semantics</li>
                            </ul>
        				</ul>
        			</div>
                    
                    <div class="slide">
                        <hgroup>
                            <h1>Resource ID vs. Resource URI</li>
                        </hgroup>
                        <ul class="small">
                            <li>Resource ID</li>
                            <ul>
                                <li>Local ID, part of an entity in a data model</li>
                                <li>Unique within an application where the resource belongs</li>
                                <li>Usually generated on a server (cf. <a href="lecture3.html#/PUT">PUT to update and insert</a>)</li>
                                <li>Exposed to the resource URI as a path element<br/>
                                <code>/orders/{order-id}</code></li>                            
                            </ul>
                            <li>Resource URI</li>
                            <ul>
                                <li>Global identifier, valid on the whole Web</li>
                                <li>Corresponds to the view on the data model of the app</li>
                                <li>Include multiple higher-level resources' IDs</li>
                                <li>Example:<br/>
                                <code>/customers/{customer-id}/orders/{order-id}/</code></li>   
                                <li>There can be more URIs identifying the same resource</li>
                            </ul>
                            
                        </ul>
                    </div>

                    <div class="slide">
                        <hgroup>
                            <h1>Major characteristics</li>
                        </hgroup>
                        <ul class="xx-small">
                            <li>Capability URL</li>
                            <ul>
                                <li>Short lived URL generated for a specific purpose</li>
                                <li>For example, an user e-mail verification</li>
                            </ul>
                            <li>URI Alias</li>
                            <ul>
                                <li>Two URIs identifying the same resource</li>
                            </ul>
                            <li>URI Collision</li>
                            <ul>
                                <li>Two URIs identifying the same resource (misuse of an URI authority)</li>
                            </ul>
                            <li>URI Opacity</li>
                            <ul>
                                <li>Content type encoded as part of an URI</li>
                                <li><code>http://www.example.org/customers.xml</code>
                            </ul>
                            <li>Resource versions encoded in an URI</li>
                            <ul>
                                <li>Two URIs identifying the same resource of different versions</li>
                                <li><code>http://www.example.org/v1/customers.xml</code>
                            </ul>
                            <li>Persistent URL</li>
                            <ul>
                                <li>URL is valid even when the resource is obsolete</li>
                                <li>For example, a redirection should be in place</li>
                            </ul>
                        </ul>
                    </div>
        
            </section>
            
            <div class="slide outline"></div>

            <section>
                <header>Resource Representation</header>
                
        		<div class="slide">
    				<hgroup>
    					<h1>Representation and Data Format</h1>
    				</hgroup>
                    <ul class="small">
                        <li>Representation</li>
                        <ul>
                            <li>Various languages, one resource can have multiple representations</li>
                            <ul>
                                <li>XML, HTML, JSON, YAML, RDF, ...</li>
        					    <li>should conform to Internet Media Types</li>
                            </ul>
                        </ul>
                        <li>Data format</li>
                        <ul>
                            <li>Format of resource data</li>
            				<li>Binary format</li>
        					<ul>
        						<li>specific data structures</li>
        						<li>pointers, numeric values, compressed, etc.</li>
        					</ul>
        					<li>Textual format</li>
        					<ul>
        						<li>in a defined encoding as a sequence of characters</li>
        						<li>HTML, XML-based formats are textual</li>
        					</ul>
                        </ul>
                    </ul>
    			</div>
                
    			<div class="slide">
    				<hgroup>
    					<h1>Metadata</h1>
    				</hgroup>
    				<ul class="x-small">
                        <li>Metadata ~ self-description</li>
                        <ul>
                            <li>Data about the resource</li>
                            <li>e.g., data format, representation, date the resource was created, ...</li>
                            <li class="space-before no-bullet">1. Defined by HTTP response headers</li>
                            <li class="no-bullet">2. Can be part of the data format</li>
                            <ul>
                                <li>Atom Syndication Format such as <code>author</code>, <code>updated</code>, ...</li>
                                <li>HTML <code>http-equiv</code> meta tags</li>
                            </ul>
                        </ul>
                        <li>Resource anatomy</li>
                        <div class="h-drawing" style="height: 220px" id="1AYsQub6fAGV4Z_R2BdIm4JPmoqtamueF9ABNoyPKyJ4"></div>
    				</ul>				
    			</div>
                
        		<div class="slide">
    				<hgroup>
    					<h1>Content-Type Metadata</h1>
    				</hgroup>
    				<ul class="x-small">
    					<li>Access</li>
    					<ul>
    						<li>to be retrieved (GET)</li>
    						<li>to be inserted or updated (PUT, POST)</li>
    						<li>to be deleted (DELETE)</li>
    					</ul>
                        <li>Request</li>
                        <ul>
                            <li>HTTP header <code>Accept</code>, part of content negotiation protocol</li>
                        </ul>
                        <li>Response</li>
                        <ul>
                            <li>HTTP header <code>Content-Type: type/subtype; parameters</code></li>
                            <li>Specifies an <span id="rfc-2045" class="h-ref">Internet 
                                Media Type</span> of the resource representation.</li>
                            <ul>
            					<li>IANA (Internet Assigned Numbers Authority) 
        						  manages a <span id="iana-media-types" class="h-ref">registry of media types</span> and character encodings</li>
        						<li>subtypes of <code>text</code> type have an optional charset parameter<br/>
        						<code>text/html; charset=iso-8859-1</code></li>                        
                            </ul>
                            <li>A resource may provide more than one representations</li>
                            <ul>
                                <li>promotes services' loose coupling</li>
                            </ul>
                        </ul>
    				</ul>
    			</div> 

    			<div class="slide">
    				<hgroup>
    					<h1>Major Media Types</h1>
    				</hgroup>
    				<ul class="small">
    					<li>Common Standard Media Types</li>
    					<ul>
    						<li><code>text/plain</code></li>
                            <ul>
    							<li>natural text in no formal structures</li>
                            </ul>
    						<li><code>text/html</code></li>
                            <ul>
    							<li>natural text embedded in HTML format</li>
                            </ul>
    						<li><code>application/xml</code>, <code>application/json</code></li>
                            <ul>
        						<li>XML-based/JSON-based, application specific format</li>
                            </ul>
    						<li><code>application/wsdl+xml</code></li>
                            <ul>
        						<li><code>+xml</code> suffix to indicate a specific format</li>
                            </ul>
    					</ul>
    					<li>Non-standard media types</li>
    					<ul>
    						<li>Types or subtypes that begin with <code>x-</code> are not in IANA<br/>
                            <code>application/x-latex</code></li>
        					<li>subtypes that begin with <code>vnd.</code> are vendor-specific<br/>
        					<code>application/vnd.ms-excel</code></li>
    					</ul>
    				</ul>
    			</div>             
           
            	<div class="slide">
    				<hgroup>
    					<h1>Resource State</h1>
    				</hgroup>
                    <ul class="x-small">
                        <li>State</li>
                        <ul>
                            <li>Resource representation is in fact a <b>representation of a resource state</b></li>
                            <li>Resource may be in different states over time</li>
                        </ul>
                    </ul>
    				<div class="h-drawing" style="height: 250px; margin: 15px 0px 15px 0px;" 
    					id="1dhjNo4p6x5rS-IH3E2WcVw3TxwCqmdhtA-9wD0hwbuc"></div>
                    <ul class="small space-before">
                        <li>In REST resource states represent application states</li>                    
                    </ul>
    			</div>           
                
                <div class="slide" id="resource-state">
    				<hgroup>
    					<h1>Resource State Example</h1>
    				</hgroup>
                    <ul class="x-small">
                        <li>Time <code>t1</code>: client A retrieves a resource <code>/orders</code> (GET)</li>
                        <pre class="brush: xml; class-name: 'tight'">
                            &lt;orders>
                                &lt;order id="54467"/>
                                &lt;order id="65432"/>
                            &lt;/orders>                                                
                        </pre>
                        <li>Time <code>t2</code>: client B adds a new order (POST)</li>
                        <pre class="brush: xml; class-name: 'tight'">
                            &lt;order>
                                ...
                            &lt;/order>                                                
                        </pre>
                        <li>Time <code>t3</code>: client A retrieves a resource <code>/orders</code> (GET)</li>
                        <pre class="brush: xml; class-name: 'tight'">
                            &lt;orders>
                                &lt;order id="54467"/>
                                &lt;order id="65432"/>
                                &lt;order id="74567"/>
                            &lt;/orders>                                                
                        </pre>
                        <li>The resource <code>/orders</code> has different states in <code>t1</code>
                        and <code>t3</code>.
                    </ul>
    			</div>           
            </section>

            <div class="slide outline"></div>

            <section>
                <header>HATEOAS</header>
                
                <div class="slide">
                    <hgroup>
                        <h1>HATEOAS</h1>
                    </hgroup>
                    <ul>
                        <li>HATEOAS = Hypertext as the Engine for Application State</li>
                        <ul>
                            <li>The REST core principle</li> 
                            <li><b>Hypertext</b></li>
                            <ul>
                                <li>Hypertext is a representation of a resource with <b>links</b></li>
                                <li>A link is an URI of a resource</li>
                                <li>Applying an access to a resource via its link = state transition</li>
                            </ul>
                        </ul>
                        <li>Statelessness</li>
                        <ul>
                            <li>A service does not use a memory to remember a state</li>
                            <li>HATEOAS enables stateless implementation of services</li>
                        </ul>
                    </ul>
                </div>

                <div class="slide">
                    <hgroup>
                        <h1>Stateful server</h1>
                    </hgroup>
                    <ul class="x-small">
                        <li>Sessions to store the application state</li>
                        <ul>
                            <li>Recall HTTP state management in MDW</li>
                            <li>The app uses a server memory to remember the state</li>
                            <li>When the server restarts, the app state is lost</li>
                        </ul>
                    </ul>
                    <div class="h-drawing" style="height: 350px" 
                        id="1CcGvRSm-RMa00XbHLlk2YhU8Wqz9Bl7nuWrynaFG3Sk"></div>                    
                </div>

                <div class="slide">
                    <hgroup>
                        <h1>Stateless server</h1>
                    </hgroup>
                    <ul class="x-small">
                        <li>HTTP and hypermedia to transfer the app state</li>
                        <ul>
                            <li>Does not use a server memory to remember the app state</li>
                            <li>State transferred between a client and a service via HTTP metadata and resources' representations</li>
                        </ul>
                    </ul>
                    <div class="h-drawing" style="height: 350px" 
                        id="1ZZsczsf7O-4HLuf_Flk0Ruttv5buKRmM7afQvgGWK8w"></div>                    
                </div>

                <div class="slide">
                    <hgroup>
                        <h1>Persistent Storage and Session Memory</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Persistent Storage</li>
                        <ul>
                            <li>Contains the app data</li>
                            <li>Data is serialized into resource representation formats</li>
                            <li>All sessions may access the data via resource IDs</li>
                        </ul>
                        <li>Session Memory</li>
                        <ul>
                            <li>Server memory that contains a state of the app</li>
                            <li>A session may only access its session memory</li>
                            <li>Access through cookies</li>
                            <li>Note</li>
                            <ul>
                                <li>A session memory may be implemented via a persistent storage (such as in Google AppEngine)</li>
                            </ul>
                        </ul>
                    </ul>
                </div>
                    
                <div class="slide">
                    <hgroup>
                        <h1>Link</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Service operation</li>
                        <ul>
                            <li>Applying an access to a link (GET, PUT, POST, DELETE)</li>
                            <li>Link: HTTP method + resource URI + optional link semantics</li>
                        </ul>
                        <li>Example: <code>getOrder</code>, <code>addOrder</code>, and <code>updateItem</code></li>
                    </ul>
                    <div class="h-drawing" id="16vcb0AGdT3N5Jd4FFw9YADqYoF_QQlP46UsYngjfTKs"
                        style="height: 320px"></div>
                </div>          

                <div class="slide">
                    <hgroup>
                        <h1>Atom Links</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Atom Syndication Format</li>
                        <ul>
                            <li>XML-based document format; Atom feeds</li>
                            <li>Atom links becoming popular for RESTful applications</li>
                            <pre class="brush: xml; highlight : [2,3,4,5]">
                            &lt;order a:xmlns="http://www.w3.org/2005/Atom" xmlns="..."&gt;
                                &lt;a:link 
                                    rel="next" 
                                    href="http://company.com/orders/5543" 
                                    type="application/xml"/>
                                &lt;customer&gt;Tomas&lt;/customer>
                                &lt;items&gt;...&lt;/items>
                            &lt;/order>
                            </pre>
                            <li>Link structure</li>
                            <ul class="no-bullet">
                                <li><code>rel</code> &ndash; name of the link<br/> 
                                ~ semantics of an operation behind the link</li>
                                <li><code>href</code> &ndash; URI to the resource described by the link</li>
                                <li><code>type</code> &ndash; media type of the resource the link points to</li>
                            </ul>
                        </ul>
                    </ul>
                </div>          

                <div class="slide">
                    <hgroup>
                        <h1>Link Semantics</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Standard <code>rel</code> values</li>
                        <ul>
                            <li>Navigation: <code>next</code>, <code>previous</code>, <code>self</code></li>
                            <li>Does not reflect a HTTP method you can use</li>
                        </ul>
                        <li>Extension <code>rel</code> values</li>
                        <ul>
                            <li>You can use <code>rel</code> to indicate a semantics of an operation</li>
                            <li>Example: add item, delete order, update order, etc.</li>
                            <li>A client associates this semantics with an operation it may apply at a particular state</li>
                            <li>The semantics should be defined by using an URI</li>
                            <pre class="brush: xml;">
                            &lt;order a:xmlns="http://www.w3.org/2005/Atom" xmlns="..."&gt;
                                &lt;id>2324&lt;/id>
                                &lt;a:link rel="http://company.com/op/addItem" 
                                    href="http://company.com/orders/2324"/>
                                &lt;a:link rel="http://company.com/op/deleteOrder" 
                                    href="http://company.com/orders/2324"/>
                            &lt;/order>
                            </pre>                            
                        </ul>
                    </ul>
                </div>          

                <div class="slide">
                    <hgroup>
                        <h1>Link Headers</h1>
                    </hgroup>
                    <ul class="small">
                        <li>An alternative to Atom links in resource representations</li>
                        <ul>
                            <li>links defined in HTTP Link header, <span class="h-ref" id="rfc-5988">Web Linking IETF spec</a></li>
                            <li>They have the same semantics as Atom Links</li>
                            <li>Example:</li>
                            <pre class="brush: plain; gutter: 'false'">
                                &gt; HEAD /orders HTTP/1.1
                                
                                &lt; Content-Type: application/xml
                                &lt; Link: &lt;http://company.com/orders/?page=2&amp;size=10&gt;; rel="next"
                                &lt; Link: &lt;http://company.com/orders/?page=10&amp;size=10&gt;; rel="last"
                            </pre>
                        </ul>
                        <li>Advantages</li>
                        <ul>
                            <li>no need to get the entire document</li>
                            <li>no need to parse the document to retrieve links</li>
                            <li>use HTTP HEAD only</li>
                        </ul>                       
                    </ul>
                </div>          
            </section>
            
            <div class="slide">
                <hgroup>
                    <h1>Preconditions and HATEOAS</li>
                </hgroup>
                <ul class="x-small">
                    <li>Preconditions in HATEOAS</li>
                    <ul>
                        <li>Service in a current state generates only valid transitions 
                        that it includes in the representation of the resource.</li>
                        <li>Transition logic is realized at the server-side</li>
                    </ul>
                </ul>
                <div class="h-drawing" style="height: 230px" 
                    id="1H_GfN8C1DZObNC_9HcRLa6Nk-EuJUEr0h6-65HhHs0U"></div>
            </div>                

            <div class="slide">
                <hgroup>
                    <h1>Advantages</h1>
                </hgroup>
                <ul class="x-small">
                    <li>Location transparency</li>
                    <ul>
                        <li>only "entry-level" links published to the World</li>
                        <li>other links within documents can change without changing client's logic</li>
                        <li>Hypertext represents the current user's view, i.e. rights or other context</li>                        
                    </ul>
                    <li>Loose coupling</li>
                    <ul>
                        <li>no need for a logic to construct the links</li>
                        <li>Clients know to which states they can move via links</li>
                    </ul>
                    <li>Statelessness and Cloud</li>
                    <ul>
                        <li>Better implementation of scalability</li>
                    </ul>
                </ul>
            </div>          

        </section>
            
            
            
        </section>
        
        
    </body>
</html>
        
        
